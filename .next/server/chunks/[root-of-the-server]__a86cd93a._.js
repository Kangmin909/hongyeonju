module.exports=[70406,(e,t,i)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},9517,e=>{"use strict";var t=e.i(26747),i=e.i(90406),a=e.i(44898),r=e.i(62950);let l=new(e.i(61026)).Client({auth:process.env.NOTION_TOKEN}),n=null,s=0;async function o(e,t){let{force:i}=e.query;if("true"!==i&&n&&Date.now()-s<3e5)return t.setHeader("Cache-Control","s-maxage=300, stale-while-revalidate=600"),t.status(200).json(n);try{let e=process.env.NOTION_EXHIBITION_DB_ID,i=await l.databases.query({database_id:e}),a=await Promise.all(i.results.map(async e=>{let t=e.properties;e.id;let i=e=>e?e.title?e.title[0]?.plain_text||"":e.rich_text?e.rich_text[0]?.plain_text||"":e.select&&e.select.name||"":"",a=Object.values(t).find(e=>"title"===e.type),r=a&&a.title[0]?.plain_text||"",n=[],s=t.ExhibitionDetail||t.Detail||Object.values(t).find(e=>"relation"===e.type);if(s&&s.relation&&s.relation.length>0){let e=s.relation.map(e=>e.id);n=(await Promise.all(e.map(e=>l.pages.retrieve({page_id:e}).catch(()=>null)))).filter(e=>e).map(e=>{let t=e.properties,i=Object.values(t).find(e=>"files"===e.type),a=i?.files?.[0],r=a?.file?.url||a?.external?.url||"",l=t.id||t.ID||Object.values(t).find(e=>"title"===e.type),n=l?.title?.[0]?.plain_text||"",s=t.title||t.Title,o=s?.rich_text?.[0]?.plain_text||"";if(!o){let e=Object.values(t).find(e=>"rich_text"===e.type&&e!==s);o=e?.rich_text?.[0]?.plain_text||""}let d=t.meta||t.Meta,p=d?.rich_text?.[0]?.plain_text||"";if(!p){let e=Object.values(t).find(e=>"rich_text"===e.type&&e!==s&&e!==d);p=e?.rich_text?.[0]?.plain_text||""}return{id:n||e.id,title:o,meta:p,link:r}}).filter(e=>e.link).sort((e,t)=>e.id.localeCompare(t.id,void 0,{numeric:!0}))}return{id:r,year:i(t.year),exhibitionTitle:i(t.exhibitionTitle),date:i(t.date),location:i(t.location),description:i(t.description),link:t.link?.url||"",images:n}}));n=a,s=Date.now(),t.setHeader("Cache-Control","s-maxage=300, stale-while-revalidate=600"),t.status(200).json(a)}catch(e){console.error("Exhibition API Error:",e),t.status(500).json({error:"Failed to load exhibitions"})}}e.s(["default",()=>o],10121);var d=e.i(10121),p=e.i(7031),u=e.i(81927),c=e.i(46432);let h=(0,r.hoist)(d,"default"),x=(0,r.hoist)(d,"config"),v=new a.PagesAPIRouteModule({definition:{kind:i.RouteKind.PAGES_API,page:"/api/getExhibition",pathname:"/api/getExhibition",bundlePath:"",filename:""},userland:d,distDir:".next",relativeProjectDir:""});async function f(e,i,a){v.isDev&&(0,c.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let r="/api/getExhibition";r=r.replace(/\/index$/,"")||"/";let l=await v.prepare(e,i,{srcPage:r});if(!l){i.statusCode=400,i.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve());return}let{query:n,params:s,prerenderManifest:o,routerServerContext:d}=l;try{let t=e.method||"GET",a=(0,p.getTracer)(),l=a.getActiveScopeSpan(),c=v.instrumentationOnRequestError.bind(v),h=async l=>v.render(e,i,{query:{...n,...s},params:s,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:o.preview,propagateError:!1,dev:v.isDev,page:"/api/getExhibition",internalRevalidate:null==d?void 0:d.revalidate,onError:(...t)=>c(e,...t)}).finally(()=>{if(!l)return;l.setAttributes({"http.status_code":i.statusCode,"next.rsc":!1});let e=a.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=e.get("next.route");if(n){let e=`${t} ${n}`;l.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),l.updateName(e)}else l.updateName(`${t} ${r}`)});l?await h(l):await a.withPropagatedContext(e.headers,()=>a.trace(u.BaseServerSpan.handleRequest,{spanName:`${t} ${r}`,kind:p.SpanKind.SERVER,attributes:{"http.method":t,"http.target":e.url}},h))}catch(e){if(v.isDev)throw e;(0,t.sendError)(i,500,"Internal Server Error")}finally{null==a.waitUntil||a.waitUntil.call(a,Promise.resolve())}}e.s(["config",0,x,"default",0,h,"handler",()=>f],9517)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a86cd93a._.js.map