module.exports=[70406,(e,t,i)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},9517,e=>{"use strict";var t=e.i(26747),i=e.i(90406),a=e.i(44898),r=e.i(62950);let l=new(e.i(61026)).Client({auth:process.env.NOTION_TOKEN});async function n(e,t){try{let e=process.env.NOTION_EXHIBITION_DB_ID,i=await l.databases.query({database_id:e}),a=await Promise.all(i.results.map(async e=>{let t=e.properties;e.id;let i=e=>e?e.title?e.title[0]?.plain_text||"":e.rich_text?e.rich_text[0]?.plain_text||"":e.select&&e.select.name||"":"",a=Object.values(t).find(e=>"title"===e.type),r=a&&a.title[0]?.plain_text||"",n=[],s=t.ExhibitionDetail||t.Detail||Object.values(t).find(e=>"relation"===e.type);if(s&&s.relation&&s.relation.length>0){let e=s.relation.map(e=>e.id);n=(await Promise.all(e.map(e=>l.pages.retrieve({page_id:e}).catch(()=>null)))).filter(e=>e).map(e=>{let t=e.properties,i=t.link||t.Link||Object.values(t).find(e=>"url"===e.type),a=i?.url||"";if(!a){let e=Object.values(t).find(e=>"files"===e.type),i=e?.files?.[0];a=i?.file?.url||i?.external?.url||""}let r=t.id||t.ID||Object.values(t).find(e=>"title"===e.type),l=r?.title?.[0]?.plain_text||"",n=t.title||t.Title,s=n?.rich_text?.[0]?.plain_text||"";if(!s){let e=Object.values(t).find(e=>"rich_text"===e.type&&e!==n);s=e?.rich_text?.[0]?.plain_text||""}let o=t.meta||t.Meta,p=o?.rich_text?.[0]?.plain_text||"";if(!p){let e=Object.values(t).find(e=>"rich_text"===e.type&&e!==n&&e!==o);p=e?.rich_text?.[0]?.plain_text||""}return{id:l||e.id,title:s,meta:p,link:a}}).filter(e=>e.link).sort((e,t)=>e.id.localeCompare(t.id,void 0,{numeric:!0}))}return{id:r,year:i(t.year),exhibitionTitle:i(t.exhibitionTitle),date:i(t.date),location:i(t.location),description:i(t.description),link:t.link?.url||"",images:n}}));t.setHeader("Cache-Control","public, s-maxage=60, stale-while-revalidate=604800"),t.status(200).json(a)}catch(e){console.error("Exhibition API Error:",e),t.status(500).json({error:"Failed to load exhibitions"})}}e.s(["default",()=>n],10121);var s=e.i(10121),o=e.i(7031),p=e.i(81927),d=e.i(46432);let u=(0,r.hoist)(s,"default"),c=(0,r.hoist)(s,"config"),h=new a.PagesAPIRouteModule({definition:{kind:i.RouteKind.PAGES_API,page:"/api/getExhibition",pathname:"/api/getExhibition",bundlePath:"",filename:""},userland:s,distDir:".next",relativeProjectDir:""});async function x(e,i,a){h.isDev&&(0,d.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let r="/api/getExhibition";r=r.replace(/\/index$/,"")||"/";let l=await h.prepare(e,i,{srcPage:r});if(!l){i.statusCode=400,i.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve());return}let{query:n,params:s,prerenderManifest:u,routerServerContext:c}=l;try{let t=e.method||"GET",a=(0,o.getTracer)(),l=a.getActiveScopeSpan(),d=h.instrumentationOnRequestError.bind(h),x=async l=>h.render(e,i,{query:{...n,...s},params:s,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:u.preview,propagateError:!1,dev:h.isDev,page:"/api/getExhibition",internalRevalidate:null==c?void 0:c.revalidate,onError:(...t)=>d(e,...t)}).finally(()=>{if(!l)return;l.setAttributes({"http.status_code":i.statusCode,"next.rsc":!1});let e=a.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=e.get("next.route");if(n){let e=`${t} ${n}`;l.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),l.updateName(e)}else l.updateName(`${t} ${r}`)});l?await x(l):await a.withPropagatedContext(e.headers,()=>a.trace(p.BaseServerSpan.handleRequest,{spanName:`${t} ${r}`,kind:o.SpanKind.SERVER,attributes:{"http.method":t,"http.target":e.url}},x))}catch(e){if(h.isDev)throw e;(0,t.sendError)(i,500,"Internal Server Error")}finally{null==a.waitUntil||a.waitUntil.call(a,Promise.resolve())}}e.s(["config",0,c,"default",0,u,"handler",()=>x],9517)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a86cd93a._.js.map