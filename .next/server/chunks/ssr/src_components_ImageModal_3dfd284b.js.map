{"version":3,"sources":["../../../../src/components/ImageModal.js","../../../../src/hooks/useTouchHandlers.js","../../../../src/hooks/useMediaQuery.js","../../../../src/components/VideoModal.js"],"sourcesContent":["import React, { useEffect, useState, useRef, useCallback } from 'react';\nimport { useTouchHandlers } from '../hooks/useTouchHandlers';\nimport { useMediaQuery } from '../hooks/useMediaQuery';\nimport './ImageModal.css';\n\nconst ImageModal = ({ images = [], initialIndex = 0, onClose }) => {\n  const isFinePointer = useMediaQuery('(pointer: fine)');\n  const [currentIndex, setCurrentIndex] = useState(initialIndex);\n  const [zoom, setZoom] = useState(1);\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\n  const [containerWidth, setContainerWidth] = useState(window.innerWidth);\n  const [showControls, setShowControls] = useState(true);\n  const [isDraggingState, setIsDraggingState] = useState(false);\n  const [isMounting, setIsMounting] = useState(true);\n  const [isResizing, setIsResizing] = useState(false);\n    \n  const viewportRef = useRef(null);\n  const clickTimerRef = useRef(null);\n  const hideTimerRef = useRef(null);\n  const resizeTimerRef = useRef(null);\n    \n  const state = useRef({\n    dragType: null,\n    isDragging: false,\n    hasMoved: false,\n    initialClient: { x: 0, y: 0 },\n    initialZoom: 1,\n    initialOffset: { x: 0, y: 0 },\n    isPinching: false,\n    initialPinchDistance: 0,\n    initialPinchCenter: { x: 0, y: 0 }\n  });\n\n  const resetHideTimer = useCallback(() => {\n    if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n    if (isFinePointer) {\n      hideTimerRef.current = setTimeout(() => {\n        setShowControls(false);\n      }, 2500);\n    }\n  }, [isFinePointer]);\n\n  const resetZoom = useCallback(() => {\n    setZoom(1);\n    setOffset({ x: 0, y: 0 });\n    state.current.dragType = null;\n  }, []);\n\n  const handleNext = useCallback(() => {\n    if (currentIndex < images.length - 1) {\n      setCurrentIndex(prev => prev + 1);\n      resetZoom();\n    }\n  }, [currentIndex, images.length, resetZoom]);\n\n  const handlePrev = useCallback(() => {\n    if (currentIndex > 0) {\n      setCurrentIndex(prev => prev - 1);\n      resetZoom();\n    }\n  }, [currentIndex, resetZoom]);\n\n  const onCloseRef = useRef(onClose);\n  const isPopStateRef = useRef(false);\n  \n  useEffect(() => {\n    onCloseRef.current = onClose;\n  }, [onClose]);\n\n  // Effect 1: History & Scroll Locking (Position: Fixed 방식 원복)\n  useEffect(() => {\n    const scrollY = window.scrollY;\n    const initialPath = window.location.pathname;\n    const originalScrollRestoration = window.history.scrollRestoration;\n\n    if ('scrollRestoration' in window.history) {\n      window.history.scrollRestoration = 'manual';\n    }\n\n    // 현재 위치 고정\n    document.body.style.position = 'fixed';\n    document.body.style.top = `-${scrollY}px`;\n    document.body.style.width = '100%';\n    document.body.style.overflowY = 'hidden';\n\n    const historyTimer = setTimeout(() => {\n      const currentUrl = window.location.pathname + window.location.search;\n      window.history.pushState({ modal: 'image' }, '', currentUrl);\n    }, 10);\n    \n    const handlePopState = () => {\n      isPopStateRef.current = true;\n      if (onCloseRef.current) onCloseRef.current();\n    };\n    \n    window.addEventListener('popstate', handlePopState);\n    const timer = setTimeout(() => setIsMounting(false), 50);\n\n    const updateWidth = () => {\n      if (viewportRef.current) setContainerWidth(viewportRef.current.getBoundingClientRect().width);\n    };\n\n    const resizeObserver = new ResizeObserver(() => {\n      setIsResizing(true);\n      updateWidth();\n      resetZoom();\n      if (resizeTimerRef.current) clearTimeout(resizeTimerRef.current);\n      resizeTimerRef.current = setTimeout(() => setIsResizing(false), 300);\n    });\n\n    if (viewportRef.current) resizeObserver.observe(viewportRef.current);\n    \n    return () => {\n      window.removeEventListener('popstate', handlePopState);\n      clearTimeout(historyTimer);\n      \n      if (!isPopStateRef.current && window.history.state?.modal === 'image') {\n        window.history.back();\n      }\n\n      const scrollPos = document.body.style.top;\n      const currentPath = window.location.pathname;\n\n      // 스타일 복구\n      document.body.style.position = '';\n      document.body.style.top = '';\n      document.body.style.width = '';\n      document.body.style.overflowY = '';\n      \n      if ('scrollRestoration' in window.history) {\n        window.history.scrollRestoration = originalScrollRestoration || 'auto';\n      }\n\n      // 같은 페이지일 때만 수동 스크롤 복구\n      if (scrollPos && currentPath === initialPath) {\n        const restoreY = Math.abs(parseInt(scrollPos, 10));\n        requestAnimationFrame(() => window.scrollTo(0, restoreY));\n      }\n      \n      clearTimeout(timer);\n      if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n      resizeObserver.disconnect();\n    };\n  }, [resetZoom]);\n\n  // Effect 2: Event Listeners\n  useEffect(() => {\n    resetHideTimer();\n    const handleKeyDown = (e) => {\n      setShowControls(true);\n      resetHideTimer();\n      if (e.key === 'ArrowRight') handleNext();\n      if (e.key === 'ArrowLeft') handlePrev();\n      if (e.key === 'Escape') onCloseRef.current?.();\n    };\n    const handleGlobalMouseMove = () => {\n      if (isFinePointer) { setShowControls(true); resetHideTimer(); }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('mousemove', handleGlobalMouseMove);\n    return () => {\n      if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n      if (clickTimerRef.current) clearTimeout(clickTimerRef.current);\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('mousemove', handleGlobalMouseMove);\n    };\n  }, [handleNext, handlePrev, resetHideTimer, isFinePointer]);\n\n  const {\n    handleTouchStart,\n    handleTouchMove,\n    handleTouchEnd,\n    handleDoubleTapZoom,\n    getClampedOffset\n  } = useTouchHandlers({\n    zoom, setZoom, offset, setOffset, viewportRef, currentIndex,\n    imagesLength: images.length, containerWidth, onClose,\n    handlePrev, handleNext, resetHideTimer, setIsDraggingState, state, resetZoom\n  });\n\n  const handleContainerClick = (e) => {\n    if (state.current.hasMoved) return;\n    const { clientX, clientY, target } = e;\n    if (clickTimerRef.current) {\n      clearTimeout(clickTimerRef.current);\n      clickTimerRef.current = null;\n      handleDoubleTapZoom(clientX, clientY, target);\n    } else {\n      clickTimerRef.current = setTimeout(() => {\n        setShowControls(prev => {\n          const next = !prev;\n          if (next) resetHideTimer();\n          else if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n          return next;\n        });\n        clickTimerRef.current = null;\n      }, 250);\n    }\n  };\n\n  const handleMouseDown = useCallback((e) => {\n    resetHideTimer();\n    state.current.isDragging = true;\n    setIsDraggingState(true);\n    state.current.initialClient = { x: e.clientX, y: e.clientY };\n    state.current.initialOffset = offset;\n    state.current.hasMoved = false;\n    state.current.dragType = null;\n  }, [offset, resetHideTimer]);\n\n  const handleMouseMove = useCallback((e) => {\n    if (!state.current.isDragging || e.touches) return;\n    const dx = e.clientX - state.current.initialClient.x;\n    const dy = e.clientY - state.current.initialClient.y;\n    if (Math.abs(dx) > 10 || Math.abs(dy) > 10) {\n      state.current.hasMoved = true;\n      setShowControls(true);\n      resetHideTimer();\n    }\n    if (zoom > 1) {\n      setOffset(getClampedOffset(state.current.initialOffset.x + dx, state.current.initialOffset.y + dy, zoom));\n    } else {\n      if (!state.current.dragType) {\n        if (Math.abs(dy) > Math.abs(dx) && dy > 0) state.current.dragType = 'dismiss';\n        else if (Math.abs(dx) > Math.abs(dy)) state.current.dragType = 'swipe';\n      }\n      if (state.current.dragType === 'dismiss') {\n        setOffset({ x: 0, y: Math.max(0, dy) });\n      } else if (state.current.dragType === 'swipe') {\n        let newX = state.current.initialOffset.x + dx;\n        if (currentIndex === 0 && newX > 0) newX = newX * 0.3;\n        if (currentIndex === images.length - 1 && newX < 0) newX = newX * 0.3;\n        setOffset({ x: newX, y: 0 });\n      }\n    }\n  }, [zoom, getClampedOffset, resetHideTimer, currentIndex, images.length]);\n\n  const handleMouseUp = useCallback(() => {\n    if (state.current.isDragging && zoom === 1) {\n      if (state.current.dragType === 'dismiss' && offset.y > 100) { onClose(); return; }\n      else if (state.current.dragType === 'swipe') {\n        const threshold = containerWidth * 0.2;\n        if (offset.x > threshold) handlePrev();\n        else if (offset.x < -threshold) handleNext();\n      }\n      setOffset({ x: 0, y: 0 });\n    }\n    state.current.isDragging = false;\n    setIsDraggingState(false);\n    state.current.dragType = null;\n  }, [zoom, offset.y, offset.x, handleNext, handlePrev, onClose, containerWidth]);\n\n  const handleWheel = useCallback((e) => {\n    e.preventDefault();\n    const delta = e.deltaY > 0 ? -0.2 : 0.2;\n    const newZoom = Math.min(Math.max(zoom + delta, 1), 5);\n    if (newZoom === zoom) return;\n    if (newZoom === 1) { resetZoom(); return; }\n    if (!viewportRef.current) return;\n    const rect = viewportRef.current.getBoundingClientRect();\n    const mouseX = e.clientX - (rect.left + rect.width / 2);\n    const mouseY = e.clientY - (rect.top + rect.height / 2);\n    const ratio = newZoom / zoom;\n    setZoom(newZoom);\n    setOffset(getClampedOffset(mouseX - (mouseX - offset.x) * ratio, mouseY - (mouseY - offset.y) * ratio, newZoom));\n  }, [zoom, offset, resetZoom, getClampedOffset]);\n\n  const overlayOpacity = state.current.dragType === 'dismiss' ? Math.max(1 - offset.y / 600, 0) : 1;\n\n  return (\n    <div \n      className={`image-modal-overlay ${isDraggingState ? 'is-dragging' : ''}`}\n      style={{ \n        backgroundColor: `rgba(0, 0, 0, ${1.0 * overlayOpacity})`,\n        transform: state.current.dragType === 'dismiss' ? `translate3d(0, ${offset.y}px, 0)` : 'none'\n      }}\n      onMouseDown={handleMouseDown} onMouseMove={handleMouseMove} onMouseUp={handleMouseUp} onMouseLeave={handleMouseUp} \n      onTouchStart={handleTouchStart} onTouchMove={handleTouchMove} onTouchEnd={handleTouchEnd}\n      onClick={handleContainerClick}\n    >\n      <div className=\"image-modal-content-container\">\n        <div className={`image-modal-header-bar ${!showControls ? 'hidden' : ''}`}>\n          <button className=\"modal-universal-back-btn\" onClick={(e) => { e.stopPropagation(); onClose(); }} aria-label=\"Back\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><line x1=\"19\" y1=\"12\" x2=\"5\" y2=\"12\"></line><polyline points=\"12 19 5 12 12 5\"></polyline></svg>\n          </button>\n          <div className=\"image-modal-info\">{currentIndex + 1} / {images.length}</div>\n        </div>\n        <button className={`modal-nav-btn prev ${currentIndex === 0 ? 'disabled' : ''} ${!showControls ? 'hidden' : ''}`} onClick={(e) => { e.stopPropagation(); handlePrev(); }} disabled={currentIndex === 0}>\n          <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><polyline points=\"15 18 9 12 15 6\"></polyline></svg>\n        </button>\n        <button className={`modal-nav-btn next ${currentIndex === images.length - 1 ? 'disabled' : ''} ${!showControls ? 'hidden' : ''}`} onClick={(e) => { e.stopPropagation(); handleNext(); }} disabled={currentIndex === images.length - 1}>\n          <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>\n        </button>\n        <div className=\"image-modal-wrapper fullscreen\">\n          <div className=\"image-modal-viewport fullscreen\" ref={viewportRef}>\n            <div className=\"slider-container\" style={{\n                transform: `translate3d(${-currentIndex * (containerWidth + 40) + (state.current.dragType === 'swipe' ? offset.x : 0)}px, 0, 0)`,\n                transition: (isDraggingState || isMounting || isResizing) ? 'none' : 'transform 0.4s cubic-bezier(0.16, 1, 0.3, 1)'\n              }}>\n              {images.map((img, idx) => (\n                <div key={idx} className=\"slide-item\">\n                  <div className=\"media-movable-content\" style={idx === currentIndex ? { \n                      transform: `translate(${zoom > 1 ? offset.x : 0}px, ${zoom > 1 ? offset.y : 0}px) scale(${zoom})`,\n                      transition: isDraggingState ? 'none' : 'transform 0.3s cubic-bezier(0.2, 0, 0, 1)' \n                    } : {}} onWheel={idx === currentIndex ? handleWheel : null}>\n                    <img src={img.link} alt={img.title || ''} className=\"image-modal-img-internal fullscreen\" draggable=\"false\" />\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n        <div className={`image-modal-footer-bar ${!showControls ? 'hidden' : ''}`}>\n          <div className=\"image-modal-caption\">\n            <div className=\"caption-title\">{images[currentIndex]?.title}</div>\n            <div className=\"caption-meta\">{images[currentIndex]?.meta}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ImageModal;\n","import { useCallback } from 'react';\n\n/**\n * Custom hook to handle touch gestures (Swipe & Pinch-to-Zoom) for the ImageModal.\n */\nexport const useTouchHandlers = ({\n  zoom,\n  setZoom,\n  offset,\n  setOffset,\n  viewportRef,\n  currentIndex,\n  imagesLength,\n  containerWidth,\n  onClose,\n  handlePrev,\n  handleNext,\n  resetHideTimer,\n  setIsDraggingState,\n  state, // External ref\n  resetZoom, // External function\n}) => {\n  // state is passed from parent\n\n  // Calculate clamped offset to keep image within viewport\n  const getClampedOffset = useCallback((newX, newY, currentZoom) => {\n    if (!viewportRef.current) return { x: newX, y: newY };\n\n    const vWidth = viewportRef.current.offsetWidth;\n    const vHeight = viewportRef.current.offsetHeight;\n    const iWidth = vWidth * currentZoom;\n    const iHeight = vHeight * currentZoom;\n\n    let maxX = 0, maxY = 0;\n    if (iWidth > vWidth) maxX = (iWidth - vWidth) / 2;\n    if (iHeight > vHeight) maxY = (iHeight - vHeight) / 2;\n\n    return {\n      x: Math.max(-maxX, Math.min(maxX, newX)),\n      y: Math.max(-maxY, Math.min(maxY, newY)),\n    };\n  }, [viewportRef]);\n\n  // Handle Touch Start\n  const handleTouchStart = useCallback((e) => {\n    resetHideTimer();\n\n    // 1. Pinch Start (2 fingers)\n    if (e.touches.length === 2) {\n      state.current.isPinching = true;\n\n      const t1 = e.touches[0];\n      const t2 = e.touches[1];\n\n      state.current.initialPinchDistance = Math.hypot(\n        t1.clientX - t2.clientX,\n        t1.clientY - t2.clientY\n      );\n      state.current.initialZoom = zoom;\n      state.current.initialOffset = offset;\n\n      // Calculate pinch center relative to viewport\n      if (viewportRef.current) {\n        const rect = viewportRef.current.getBoundingClientRect();\n        const vCenterX = rect.left + rect.width / 2;\n        const vCenterY = rect.top + rect.height / 2;\n        state.current.initialPinchCenter = {\n          x: (t1.clientX + t2.clientX) / 2 - vCenterX,\n          y: (t1.clientY + t2.clientY) / 2 - vCenterY,\n        };\n      } else {\n        state.current.initialPinchCenter = { x: 0, y: 0 };\n      }\n      return;\n    }\n\n    // 2. Swipe/Drag Start (1 finger)\n    const touch = e.touches[0];\n    // Prevent conflict with iOS back swipe (left edge)\n    if (touch.clientX < 40) return;\n\n    state.current.isDragging = true;\n    setIsDraggingState(true);\n    state.current.initialClient = { x: touch.clientX, y: touch.clientY };\n    state.current.initialZoom = zoom;\n    state.current.initialOffset = offset;\n    state.current.hasMoved = false;\n    state.current.dragType = null;\n  }, [zoom, offset, resetHideTimer, setIsDraggingState, viewportRef, state]);\n\n  // Handle Touch Move\n  const handleTouchMove = useCallback((e) => {\n    // 1. Pinch Move\n    if (state.current.isPinching && e.touches.length === 2) {\n      const t1 = e.touches[0];\n      const t2 = e.touches[1];\n\n      const dist = Math.hypot(\n        t1.clientX - t2.clientX,\n        t1.clientY - t2.clientY\n      );\n      const scale = dist / state.current.initialPinchDistance;\n      const newZoom = Math.min(Math.max(state.current.initialZoom * scale, 1), 5);\n\n      let newX = 0, newY = 0;\n      if (viewportRef.current) {\n        const rect = viewportRef.current.getBoundingClientRect();\n        const vCenterX = rect.left + rect.width / 2;\n        const vCenterY = rect.top + rect.height / 2;\n        const currentPinchCenter = {\n          x: (t1.clientX + t2.clientX) / 2 - vCenterX,\n          y: (t1.clientY + t2.clientY) / 2 - vCenterY,\n        };\n\n        const ratio = newZoom / state.current.initialZoom;\n        const dx = state.current.initialPinchCenter.x - state.current.initialOffset.x;\n        const dy = state.current.initialPinchCenter.y - state.current.initialOffset.y;\n\n        newX = currentPinchCenter.x - dx * ratio;\n        newY = currentPinchCenter.y - dy * ratio;\n      }\n\n      setZoom(newZoom);\n      setOffset(getClampedOffset(newX, newY, newZoom));\n      return;\n    }\n\n    // 2. Swipe/Drag Move\n    if (!state.current.isDragging || e.touches.length > 1) return;\n\n    const touch = e.touches[0];\n    const dx = touch.clientX - state.current.initialClient.x;\n    const dy = touch.clientY - state.current.initialClient.y;\n\n    if (Math.abs(dx) > 10 || Math.abs(dy) > 10) {\n      state.current.hasMoved = true;\n    }\n\n    if (zoom > 1) {\n      // Pan when zoomed in\n      setOffset(\n        getClampedOffset(\n          state.current.initialOffset.x + dx,\n          state.current.initialOffset.y + dy,\n          zoom\n        )\n      );\n    } else {\n      // Swipe or Dismiss when zoomed out\n      if (!state.current.dragType) {\n        if (Math.abs(dy) > Math.abs(dx) && dy > 0) state.current.dragType = 'dismiss';\n        else if (Math.abs(dx) > Math.abs(dy)) state.current.dragType = 'swipe';\n      }\n\n      if (state.current.dragType === 'dismiss') {\n        setOffset({ x: 0, y: Math.max(0, dy) });\n      } else if (state.current.dragType === 'swipe') {\n        let newX = state.current.initialOffset.x + dx;\n        // Rubber-banding effect\n        if (currentIndex === 0 && newX > 0) newX = newX * 0.3;\n        if (currentIndex === imagesLength - 1 && newX < 0) newX = newX * 0.3;\n        setOffset({ x: newX, y: 0 });\n      }\n    }\n  }, [zoom, currentIndex, imagesLength, getClampedOffset, setOffset, setZoom, viewportRef, state]);\n\n  // Handle Touch End\n  const handleTouchEnd = useCallback((e) => {\n    // 1. Pinch End\n    if (state.current.isPinching && e.touches.length < 2) {\n      state.current.isPinching = false;\n      // Smooth transition to drag if 1 finger remains\n      if (e.touches.length === 1) {\n        const touch = e.touches[0];\n        state.current.isDragging = true;\n        setIsDraggingState(true);\n        state.current.initialClient = { x: touch.clientX, y: touch.clientY };\n        state.current.initialOffset = offset;\n        state.current.initialZoom = zoom;\n        state.current.hasMoved = false;\n        state.current.dragType = null;\n      }\n      return;\n    }\n\n    if (e.touches.length > 0) return;\n\n    // 2. Drag End\n    if (state.current.isDragging && zoom === 1) {\n      if (state.current.dragType === 'dismiss' && offset.y > 100) {\n        onClose();\n        return;\n      } else if (state.current.dragType === 'swipe') {\n        const threshold = containerWidth * 0.2;\n        if (offset.x > threshold) handlePrev();\n        else if (offset.x < -threshold) handleNext();\n      }\n      setOffset({ x: 0, y: 0 });\n    }\n\n    state.current.isDragging = false;\n    setIsDraggingState(false);\n    state.current.dragType = null;\n  }, [zoom, offset, containerWidth, onClose, handlePrev, handleNext, setIsDraggingState, setOffset, state]);\n\n  // Double Tap Zoom logic\n  const handleDoubleTapZoom = useCallback((clientX, clientY, target) => {\n    if (zoom > 1) {\n      setZoom(1);\n      setOffset({ x: 0, y: 0 });\n      state.current.dragType = null;\n    } else {\n      const rect = target.getBoundingClientRect();\n      const x = clientX - (rect.left + rect.width / 2);\n      const y = clientY - (rect.top + rect.height / 2);\n      const targetZoom = 2.5;\n\n      setZoom(targetZoom);\n      setOffset(\n                    getClampedOffset(\n                  -x * (targetZoom - 1),\n                  -y * (targetZoom - 1),\n                  targetZoom\n                )\n              );\n            }\n          }, [zoom, setZoom, setOffset, getClampedOffset, state]);\n  return {\n    handleTouchStart,\n    handleTouchMove,\n    handleTouchEnd,\n    handleDoubleTapZoom,\n    getClampedOffset,\n    // state, // No need to return state\n  };\n};\n","'use client';\n\nimport { useState, useEffect } from 'react';\n\n/**\n * Custom hook to listen for media queries.\n * @param {string} query - The media query string (e.g., '(pointer: fine)')\n * @returns {boolean} - Whether the query matches\n */\nexport const useMediaQuery = (query) => {\n  const [matches, setMatches] = useState(false);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    const media = window.matchMedia(query);\n    setMatches(media.matches); // Set initial value on mount\n\n    const listener = (e) => setMatches(e.matches);\n\n    // Modern browsers\n    if (media.addEventListener) {\n      media.addEventListener('change', listener);\n      return () => media.removeEventListener('change', listener);\n    } \n    // Legacy support\n    else if (media.addListener) {\n      media.addListener(listener);\n      return () => media.removeListener(listener);\n    }\n  }, [query]);\n\n  return matches;\n};\n\n","import React, { useEffect, useState, useRef, useCallback } from 'react';\nimport { useMediaQuery } from '../hooks/useMediaQuery';\nimport './VideoModal.css';\n\nconst VideoModal = ({ src, alt, onClose }) => {\n  const isFinePointer = useMediaQuery('(pointer: fine)');\n  const [loading, setLoading] = useState(true);\n  const [offsetY, setOffsetY] = useState(0);\n  const [showControls, setShowControls] = useState(true);\n  const [isDraggingState, setIsDraggingState] = useState(false);\n  const isDragging = useRef(false);\n  const startY = useRef(0);\n  const startX = useRef(0);\n  const initialOffsetY = useRef(0);\n  const hideTimerRef = useRef(null);\n  const hasMoved = useRef(false);\n  const lastToggleTime = useRef(0);\n\n  const resetHideTimer = useCallback(() => {\n    if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n    hideTimerRef.current = setTimeout(() => setShowControls(false), 2500);\n  }, []);\n\n  const onCloseRef = useRef(onClose);\n  const isPopStateRef = useRef(false);\n\n  useEffect(() => {\n    onCloseRef.current = onClose;\n  }, [onClose]);\n\n  // Effect 1: History & Scroll Locking\n  useEffect(() => {\n    const scrollY = window.scrollY;\n    const initialPath = window.location.pathname;\n    const originalScrollRestoration = window.history.scrollRestoration;\n\n    if ('scrollRestoration' in window.history) {\n      window.history.scrollRestoration = 'manual';\n    }\n\n    document.body.style.position = 'fixed';\n    document.body.style.top = `-${scrollY}px`;\n    document.body.style.width = '100%';\n    document.body.style.overflowY = 'hidden';\n\n    const historyTimer = setTimeout(() => {\n      const currentUrl = window.location.pathname + window.location.search;\n      window.history.pushState({ modal: 'video' }, '', currentUrl);\n    }, 10);\n    \n    const handlePopState = () => {\n      isPopStateRef.current = true;\n      if (onCloseRef.current) onCloseRef.current();\n    };\n    \n    window.addEventListener('popstate', handlePopState);\n\n    return () => {\n      window.removeEventListener('popstate', handlePopState);\n      clearTimeout(historyTimer);\n      if (!isPopStateRef.current && window.history.state?.modal === 'video') window.history.back();\n\n      const scrollPos = document.body.style.top;\n      const currentPath = window.location.pathname;\n\n      document.body.style.position = '';\n      document.body.style.top = '';\n      document.body.style.width = '';\n      document.body.style.overflowY = '';\n      \n      if ('scrollRestoration' in window.history) {\n        window.history.scrollRestoration = originalScrollRestoration || 'auto';\n      }\n\n      if (scrollPos && currentPath === initialPath) {\n        const restoreY = Math.abs(parseInt(scrollPos, 10));\n        requestAnimationFrame(() => window.scrollTo(0, restoreY));\n      }\n    };\n  }, []);\n\n  // Effect 2: Event Listeners\n  useEffect(() => {\n    resetHideTimer();\n    const handleKeyDown = (e) => {\n      setShowControls(true);\n      resetHideTimer();\n      if (e.key === 'Escape') onCloseRef.current?.();\n    };\n    const handleMouseMove = () => {\n      if (isFinePointer) { setShowControls(true); resetHideTimer(); }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('mousemove', handleMouseMove);\n    return () => {\n      if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('mousemove', handleMouseMove);\n    };\n  }, [resetHideTimer, isFinePointer]);\n\n  const handleStart = (e) => {\n    isDragging.current = true;\n    setIsDraggingState(true);\n    hasMoved.current = false;\n    const clientY = e.type === 'touchstart' ? e.touches[0].clientY : e.clientY;\n    const clientX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;\n    startY.current = clientY;\n    startX.current = clientX;\n    initialOffsetY.current = offsetY;\n  };\n\n  const handleMove = (e) => {\n    if (!isDragging.current) return;\n    const clientY = e.type === 'touchmove' ? e.touches[0].clientY : e.clientY;\n    const clientX = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;\n    const dy = clientY - startY.current;\n    const dx = clientX - startX.current;\n    if (Math.abs(dy) > 20 || Math.abs(dx) > 20) {\n      hasMoved.current = true;\n      setShowControls(true);\n      resetHideTimer();\n    }\n    const newY = initialOffsetY.current + dy;\n    if (newY >= 0) setOffsetY(newY);\n  };\n\n  const handleContainerClick = useCallback((e) => {\n    if (hasMoved.current || offsetY > 10 || isFinePointer) return;\n    const now = Date.now();\n    if (now - lastToggleTime.current < 300) return;\n    lastToggleTime.current = now;\n    setShowControls(prev => {\n      const next = !prev;\n      if (next) resetHideTimer();\n      else if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n      return next;\n    });\n  }, [resetHideTimer, offsetY, isFinePointer]);\n\n  const handleEnd = useCallback((e) => {\n    if (!isDragging.current) return;\n    if (offsetY > 100) { onClose(); } \n    else {\n      setOffsetY(0);\n      if (!hasMoved.current) handleContainerClick(e);\n    }\n    isDragging.current = false;\n    setIsDraggingState(false);\n    startY.current = 0;\n    startX.current = 0;\n    setTimeout(() => { hasMoved.current = false; }, 150);\n  }, [offsetY, onClose, handleContainerClick]);\n\n  const getYouTubeVideoId = (url) => {\n    if (!url) return null;\n    const patterns = [\n      /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/|youtube\\.com\\/embed\\/)([^&\\n?#]+)/,\n      /youtube\\.com\\/watch\\?.*v=([^&\\n?#]+)/\n    ];\n    for (const pattern of patterns) {\n      const match = url.match(pattern);\n      if (match && match[1]) return match[1];\n    }\n    return null;\n  };\n\n  const overlayOpacity = Math.max(1 - offsetY / 600, 0);\n  if (!src) return null;\n  const isYouTube = src.includes('youtube.com') || src.includes('youtu.be');\n\n  return (\n    <div \n      className={`video-modal-overlay ${isDraggingState ? 'is-dragging' : ''}`}\n      onMouseDown={handleStart} onTouchStart={handleStart} onMouseMove={handleMove} onTouchMove={handleMove}\n      onMouseUp={handleEnd} onTouchEnd={handleEnd} onMouseLeave={handleEnd} onClick={handleContainerClick}\n      style={{ backgroundColor: `rgba(0, 0, 0, ${1.0 * overlayOpacity})`, transform: `translate3d(0, ${offsetY}px, 0)` }}\n    >\n      <div className=\"video-modal-content-container\">\n        <button className={`video-modal-close-btn ${!showControls ? 'hidden' : ''}`} onClick={(e) => { e.stopPropagation(); onClose(); }} aria-label=\"Close\" >&times;</button>\n        <div className=\"video-modal-wrapper\">\n          {loading && <div className=\"video-modal-loader\" />}\n          {isYouTube ? (\n            <iframe\n              src={`https://www.youtube.com/embed/${getYouTubeVideoId(src)}?autoplay=1`}\n              title={alt || 'YouTube video'}\n              className=\"video-modal-element\"\n              frameBorder=\"0\"\n              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n              allowFullScreen\n              onLoad={() => setLoading(false)}\n            />\n          ) : (\n            <video\n              src={src}\n              className=\"video-modal-element\"\n              controls\n              autoPlay\n              playsInline\n              onLoadedData={() => setLoading(false)}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VideoModal;\n"],"names":[],"mappings":"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"}