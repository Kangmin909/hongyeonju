{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/components/Skeleton.js"],"sourcesContent":["import React from 'react';\nimport './Skeleton.css';\n\n// 기본 스켈레톤 박스\nexport const SkeletonBox = ({ width, height, className = '' }) => {\n  return (\n    <div \n      className={`skeleton-box ${className}`}\n      style={{ width, height }}\n    />\n  );\n};\n\n// 텍스트 스켈레톤\nexport const SkeletonText = ({ lines = 1, width = '100%' }) => {\n  return (\n    <div className=\"skeleton-text-container\">\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className=\"skeleton-text\"\n          style={{ \n            width: index === lines - 1 ? '80%' : width,\n            marginBottom: index < lines - 1 ? '6px' : '0'\n          }}\n        />\n      ))}\n    </div>\n  );\n};\n\n// 이미지 스켈레톤\nexport const SkeletonImage = ({ width = '100%', height = '200px', className = '' }) => {\n  return (\n    <div \n      className={`skeleton-image ${className}`}\n      style={{ width, height }}\n    />\n  );\n};\n\n// 작품 아이템 스켈레톤\nexport const SkeletonWorkItem = () => {\n  return (\n    <div className=\"skeleton-work-item\">\n      <SkeletonImage height=\"auto\" className=\"skeleton-work-image\" />\n      <div className=\"skeleton-work-info\">\n        <SkeletonText lines={1} width=\"60%\" />\n        <SkeletonText lines={1} width=\"80%\" />\n      </div>\n    </div>\n  );\n};\n\n// 전시 아이템 스켈레톤\nexport const SkeletonExhibitionItem = () => {\n  return (\n    <div className=\"skeleton-exhibition-item\">\n      <SkeletonImage height=\"auto\" className=\"skeleton-exhibition-image\" />\n      <div className=\"skeleton-exhibition-info\">\n        <SkeletonBox width=\"70%\" height=\"24px\" style={{ marginBottom: '10px' }} />\n        <SkeletonText lines={1} width=\"50%\" />\n        <SkeletonText lines={1} width=\"60%\" />\n      </div>\n    </div>\n  );\n};\n\n// CV 리스트 아이템 스켈레톤\nexport const SkeletonCVItem = () => {\n  return (\n    <div className=\"skeleton-cv-item\">\n      <SkeletonBox width=\"34px\" height=\"17px\" />\n      <SkeletonText lines={1} width=\"200px\" />\n    </div>\n  );\n};\n\n// Home 이미지 스켈레톤\nexport const SkeletonHomeImage = () => {\n  return (\n    <div className=\"skeleton-home-image\">\n      <SkeletonImage width=\"100%\" height=\"100%\" />\n    </div>\n  );\n};\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;;;AAIO,IAAM,cAAc;QAAG,cAAA,OAAO,eAAA,iCAAQ,WAAA,0CAAY;IACvD,qBACE,6LAAC;QACC,WAAW,AAAC,gBAAyB,OAAV;QAC3B,OAAO;YAAE,OAAA;YAAO,QAAA;QAAO;;;;;;AAG7B;KAPa;AAUN,IAAM,eAAe;6BAAG,OAAA,kCAAQ,uCAAG,OAAA,kCAAQ;IAChD,qBACE,6LAAC;QAAI,WAAU;kBACZ,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAM,GAAG,GAAG,CAAC,SAAC,GAAG;iCACrC,6LAAC;gBAEC,WAAU;gBACV,OAAO;oBACL,OAAO,UAAU,QAAQ,IAAI,QAAQ;oBACrC,cAAc,QAAQ,QAAQ,IAAI,QAAQ;gBAC5C;eALK;;;;;;;;;;;AAUf;MAfa;AAkBN,IAAM,gBAAgB;6BAAG,OAAA,kCAAQ,6CAAQ,QAAA,oCAAS,kDAAS,WAAA,0CAAY;IAC5E,qBACE,6LAAC;QACC,WAAW,AAAC,kBAA2B,OAAV;QAC7B,OAAO;YAAE,OAAA;YAAO,QAAA;QAAO;;;;;;AAG7B;MAPa;AAUN,IAAM,mBAAmB;IAC9B,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAc,QAAO;gBAAO,WAAU;;;;;;0BACvC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAa,OAAO;wBAAG,OAAM;;;;;;kCAC9B,6LAAC;wBAAa,OAAO;wBAAG,OAAM;;;;;;;;;;;;;;;;;;AAItC;MAVa;AAaN,IAAM,yBAAyB;IACpC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAc,QAAO;gBAAO,WAAU;;;;;;0BACvC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAY,OAAM;wBAAM,QAAO;wBAAO,OAAO;4BAAE,cAAc;wBAAO;;;;;;kCACrE,6LAAC;wBAAa,OAAO;wBAAG,OAAM;;;;;;kCAC9B,6LAAC;wBAAa,OAAO;wBAAG,OAAM;;;;;;;;;;;;;;;;;;AAItC;MAXa;AAcN,IAAM,iBAAiB;IAC5B,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAY,OAAM;gBAAO,QAAO;;;;;;0BACjC,6LAAC;gBAAa,OAAO;gBAAG,OAAM;;;;;;;;;;;;AAGpC;MAPa;AAUN,IAAM,oBAAoB;IAC/B,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAc,OAAM;YAAO,QAAO;;;;;;;;;;;AAGzC;MANa"}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/components/MediaDisplay.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './MediaDisplay.css';\n\n// 한 번 로드된 이미지 URL을 기억하여 재방문 시 깜빡임을 방지합니다.\nconst loadedImageCache = new Set();\n\n// 유튜브 URL에서 비디오 ID 추출\nconst getYouTubeVideoId = (url) => {\n  if (!url) return null;\n  \n  const patterns = [\n    /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/|youtube\\.com\\/embed\\/)([^&\\n?#]+)/,\n    /youtube\\.com\\/watch\\?.*v=([^&\\n?#]+)/\n  ];\n  \n  for (const pattern of patterns) {\n    const match = url.match(pattern);\n    if (match && match[1]) {\n      return match[1];\n    }\n  }\n  \n  return null;\n};\n\n// 유튜브 URL인지 확인\nconst isYouTubeUrl = (url) => {\n  return getYouTubeVideoId(url) !== null;\n};\n\n// MediaDisplay 컴포넌트\nconst MediaDisplay = ({ src, alt, className, autoplay = false, controls = false, onClick }) => {\n  const [hasError, setHasError] = useState(false);\n  // 캐시에 있으면 즉시 로드된 상태로 시작합니다.\n  const [isLoaded, setIsLoaded] = useState(() => src ? loadedImageCache.has(src) : false);\n\n  useEffect(() => {\n    if (isLoaded && src) {\n      loadedImageCache.add(src);\n    }\n  }, [isLoaded, src]);\n\n  if (hasError || !src) {\n    return (\n      <div className={`media-error-placeholder ${className || ''}`}>\n        <div className=\"media-error-message\">이미지를 불러오지 못했습니다.</div>\n      </div>\n    );\n  }\n\n  const wrapperClass = `media-placeholder-wrapper ${!isLoaded ? 'loading-shimmer' : ''} ${className || ''}`;\n\n  const clickOverlayStyle = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    cursor: 'pointer',\n    zIndex: 10,\n    background: 'transparent'\n  };\n\n  if (isYouTubeUrl(src)) {\n    const videoId = getYouTubeVideoId(src);\n    const autoplayParams = 'autoplay=1&mute=1&loop=1&playlist=' + videoId;\n    const embedUrl = `https://www.youtube.com/embed/${videoId}?${autoplayParams}`;\n    \n    return (\n      <div className={wrapperClass}>\n        <div className=\"media-container\">\n          <iframe\n            src={embedUrl}\n            title={alt || 'YouTube video'}\n            className=\"media-iframe\"\n            frameBorder=\"0\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            allowFullScreen\n            onLoad={() => setIsLoaded(true)}\n            onError={() => setHasError(true)}\n          />\n          {onClick && <div style={clickOverlayStyle} onClick={onClick} />}\n        </div>\n      </div>\n    );\n  }\n\n  // Ensure src is a string before checking extension\n  const srcString = String(src || \"\");\n\n  if (srcString.toLowerCase().endsWith('.mp4')) {\n    return (\n      <div className={wrapperClass}>\n        <video\n          src={src}\n          className=\"media-element\"\n          autoPlay={autoplay}\n          muted={autoplay}\n          loop={autoplay}\n          playsInline\n          controls={controls}\n          onLoadedData={() => setIsLoaded(true)}\n          onError={() => setHasError(true)}\n          onClick={onClick}\n          style={onClick ? { cursor: 'pointer' } : {}}\n        />\n        {onClick && !controls && <div style={clickOverlayStyle} onClick={onClick} />}\n      </div>\n    );\n  }\n\n  return (\n    <div className={wrapperClass}>\n      <img \n        src={src} \n        alt={alt || \"Media content\"} \n        className=\"media-element\"\n        onLoad={() => setIsLoaded(true)}\n        onError={() => setHasError(true)}\n        onClick={onClick}\n        style={onClick ? { cursor: 'pointer' } : {}}\n      />\n    </div>\n  );\n};\n\nexport default MediaDisplay;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/components/YearNav.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport { SkeletonBox } from './Skeleton';\n\n/**\n * 연도 네비게이션 공용 컴포넌트\n * props:\n * - years: 연도 배열\n * - selectedYear: 현재 선택된 연도\n * - onSelect: 연도 클릭 시 콜백(year => void)\n * - loading: 로딩 상태일 때 스켈레톤 표시\n * - className: 추가 클래스\n */\nconst YearNav = ({ years, selectedYear, onSelect, loading = false, className = '' }) => {\n  const yearsArray = Array.isArray(years) ? years : [];\n  const scrollRef = useRef(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [startX, setStartX] = useState(0);\n  const [scrollLeft, setScrollLeft] = useState(0);\n  const [moved, setMoved] = useState(false);\n\n  // 선택된 연도가 화면 밖으로 나갔을 경우 중앙으로 스크롤\n  useEffect(() => {\n    if (selectedYear && scrollRef.current) {\n      const activeElement = scrollRef.current.querySelector('.year.active');\n      if (activeElement) {\n        activeElement.scrollIntoView({\n          behavior: 'smooth',\n          inline: 'center',\n          block: 'nearest'\n        });\n      }\n    }\n  }, [selectedYear]);\n\n  const onMouseDown = (e) => {\n    setIsDragging(true);\n    setStartX(e.pageX - scrollRef.current.offsetLeft);\n    setScrollLeft(scrollRef.current.scrollLeft);\n    setMoved(false);\n  };\n\n  const onMouseLeave = () => {\n    setIsDragging(false);\n  };\n\n  const onMouseUp = (e) => {\n    setIsDragging(false);\n  };\n\n  const onMouseMove = (e) => {\n    if (!isDragging) return;\n    e.preventDefault();\n    const x = e.pageX - scrollRef.current.offsetLeft;\n    const walk = (x - startX) * 2; // 스크롤 속도 배율\n    if (Math.abs(walk) > 5) setMoved(true);\n    scrollRef.current.scrollLeft = scrollLeft - walk;\n  };\n\n  const handleYearClick = (year) => {\n    // 드래그 중에는 클릭 이벤트가 발생하지 않도록 방지\n    if (!moved) {\n      onSelect(year);\n    }\n  };\n\n  const renderSkeleton = () => (\n    <>\n      <div className=\"year\"><SkeletonBox width=\"40px\" height=\"24px\" /></div>\n      <div className=\"year\"><SkeletonBox width=\"40px\" height=\"24px\" /></div>\n      <div className=\"year\"><SkeletonBox width=\"40px\" height=\"24px\" /></div>\n      <div className=\"year\"><SkeletonBox width=\"40px\" height=\"24px\" /></div>\n      <div className=\"year\"><SkeletonBox width=\"40px\" height=\"24px\" /></div>\n    </>\n  );\n\n  return (\n    <nav \n      className={`year-nav ${className} ${isDragging ? 'grabbing' : ''}`.trim()}\n      ref={scrollRef}\n      onMouseDown={onMouseDown}\n      onMouseLeave={onMouseLeave}\n      onMouseUp={onMouseUp}\n      onMouseMove={onMouseMove}\n      style={{ cursor: isDragging ? 'grabbing' : 'grab' }}\n    >\n      {loading || yearsArray.length === 0\n        ? renderSkeleton()\n        : yearsArray.map((year) => (\n            <div\n              key={year}\n              className={`year ${selectedYear === year ? 'active' : ''}`}\n              onClick={() => handleYearClick(year)}\n            >\n              {year}\n            </div>\n          ))}\n    </nav>\n  );\n};\n\nexport default YearNav;\n\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;;;;;AAEA;;;;;;;;CAQC,GACD,IAAM,UAAU;QAAG,cAAA,OAAO,qBAAA,cAAc,iBAAA,iCAAU,SAAA,sCAAU,iDAAO,WAAA,0CAAY;;IAC7E,IAAM,aAAa,MAAM,OAAO,CAAC,SAAS,QAAQ,EAAE;IACpD,IAAM,YAAY,IAAA,uKAAM,EAAC;IACzB,IAAoC,qLAAA,IAAA,yKAAQ,EAAC,YAAtC,aAA6B,cAAjB,gBAAiB;IACpC,IAA4B,sLAAA,IAAA,yKAAQ,EAAC,QAA9B,SAAqB,eAAb,YAAa;IAC5B,IAAoC,sLAAA,IAAA,yKAAQ,EAAC,QAAtC,aAA6B,eAAjB,gBAAiB;IACpC,IAA0B,sLAAA,IAAA,yKAAQ,EAAC,YAA5B,QAAmB,eAAZ,WAAY;IAE1B,iCAAiC;IACjC,IAAA,0KAAS;6BAAC;YACR,IAAI,gBAAgB,UAAU,OAAO,EAAE;gBACrC,IAAM,gBAAgB,UAAU,OAAO,CAAC,aAAa,CAAC;gBACtD,IAAI,eAAe;oBACjB,cAAc,cAAc,CAAC;wBAC3B,UAAU;wBACV,QAAQ;wBACR,OAAO;oBACT;gBACF;YACF;QACF;4BAAG;QAAC;KAAa;IAEjB,IAAM,cAAc,SAAC;QACnB,cAAc;QACd,UAAU,EAAE,KAAK,GAAG,UAAU,OAAO,CAAC,UAAU;QAChD,cAAc,UAAU,OAAO,CAAC,UAAU;QAC1C,SAAS;IACX;IAEA,IAAM,eAAe;QACnB,cAAc;IAChB;IAEA,IAAM,YAAY,SAAC;QACjB,cAAc;IAChB;IAEA,IAAM,cAAc,SAAC;QACnB,IAAI,CAAC,YAAY;QACjB,EAAE,cAAc;QAChB,IAAM,IAAI,EAAE,KAAK,GAAG,UAAU,OAAO,CAAC,UAAU;QAChD,IAAM,OAAO,CAAC,IAAI,MAAM,IAAI,GAAG,YAAY;QAC3C,IAAI,KAAK,GAAG,CAAC,QAAQ,GAAG,SAAS;QACjC,UAAU,OAAO,CAAC,UAAU,GAAG,aAAa;IAC9C;IAEA,IAAM,kBAAkB,SAAC;QACvB,8BAA8B;QAC9B,IAAI,CAAC,OAAO;YACV,SAAS;QACX;IACF;IAEA,IAAM,iBAAiB;6BACrB;;8BACE,6LAAC;oBAAI,WAAU;8BAAO,cAAA,6LAAC,+IAAW;wBAAC,OAAM;wBAAO,QAAO;;;;;;;;;;;8BACvD,6LAAC;oBAAI,WAAU;8BAAO,cAAA,6LAAC,+IAAW;wBAAC,OAAM;wBAAO,QAAO;;;;;;;;;;;8BACvD,6LAAC;oBAAI,WAAU;8BAAO,cAAA,6LAAC,+IAAW;wBAAC,OAAM;wBAAO,QAAO;;;;;;;;;;;8BACvD,6LAAC;oBAAI,WAAU;8BAAO,cAAA,6LAAC,+IAAW;wBAAC,OAAM;wBAAO,QAAO;;;;;;;;;;;8BACvD,6LAAC;oBAAI,WAAU;8BAAO,cAAA,6LAAC,+IAAW;wBAAC,OAAM;wBAAO,QAAO;;;;;;;;;;;;;;IAI3D,qBACE,6LAAC;QACC,WAAW,AAAC,YAAwB,OAAb,WAAU,KAAgC,OAA7B,aAAa,aAAa,IAAK,IAAI;QACvE,KAAK;QACL,aAAa;QACb,cAAc;QACd,WAAW;QACX,aAAa;QACb,OAAO;YAAE,QAAQ,aAAa,aAAa;QAAO;kBAEjD,WAAW,WAAW,MAAM,KAAK,IAC9B,mBACA,WAAW,GAAG,CAAC,SAAC;iCACd,6LAAC;gBAEC,WAAW,AAAC,QAA6C,OAAtC,iBAAiB,OAAO,WAAW;gBACtD,SAAS;2BAAM,gBAAgB;;0BAE9B;eAJI;;;;;;;;;;;AASnB;GAtFM;KAAA;uCAwFS"}},
    {"offset": {"line": 676, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/hooks/useTouchHandlers.js"],"sourcesContent":["import { useCallback } from 'react';\n\n/**\n * Custom hook to handle touch gestures (Swipe & Pinch-to-Zoom) for the ImageModal.\n */\nexport const useTouchHandlers = ({\n  zoom,\n  setZoom,\n  offset,\n  setOffset,\n  viewportRef,\n  currentIndex,\n  imagesLength,\n  containerWidth,\n  onClose,\n  handlePrev,\n  handleNext,\n  resetHideTimer,\n  setIsDraggingState,\n  state, // External ref\n  resetZoom, // External function\n}) => {\n  // state is passed from parent\n\n  // Calculate clamped offset to keep image within viewport\n  const getClampedOffset = useCallback((newX, newY, currentZoom) => {\n    if (!viewportRef.current) return { x: newX, y: newY };\n\n    const vWidth = viewportRef.current.offsetWidth;\n    const vHeight = viewportRef.current.offsetHeight;\n    const iWidth = vWidth * currentZoom;\n    const iHeight = vHeight * currentZoom;\n\n    let maxX = 0, maxY = 0;\n    if (iWidth > vWidth) maxX = (iWidth - vWidth) / 2;\n    if (iHeight > vHeight) maxY = (iHeight - vHeight) / 2;\n\n    return {\n      x: Math.max(-maxX, Math.min(maxX, newX)),\n      y: Math.max(-maxY, Math.min(maxY, newY)),\n    };\n  }, [viewportRef]);\n\n  // Handle Touch Start\n  const handleTouchStart = useCallback((e) => {\n    resetHideTimer();\n\n    // 1. Pinch Start (2 fingers)\n    if (e.touches.length === 2) {\n      state.current.isPinching = true;\n\n      const t1 = e.touches[0];\n      const t2 = e.touches[1];\n\n      state.current.initialPinchDistance = Math.hypot(\n        t1.clientX - t2.clientX,\n        t1.clientY - t2.clientY\n      );\n      state.current.initialZoom = zoom;\n      state.current.initialOffset = offset;\n\n      // Calculate pinch center relative to viewport\n      if (viewportRef.current) {\n        const rect = viewportRef.current.getBoundingClientRect();\n        const vCenterX = rect.left + rect.width / 2;\n        const vCenterY = rect.top + rect.height / 2;\n        state.current.initialPinchCenter = {\n          x: (t1.clientX + t2.clientX) / 2 - vCenterX,\n          y: (t1.clientY + t2.clientY) / 2 - vCenterY,\n        };\n      } else {\n        state.current.initialPinchCenter = { x: 0, y: 0 };\n      }\n      return;\n    }\n\n    // 2. Swipe/Drag Start (1 finger)\n    const touch = e.touches[0];\n    // Prevent conflict with iOS back swipe (left edge)\n    if (touch.clientX < 40) return;\n\n    state.current.isDragging = true;\n    setIsDraggingState(true);\n    state.current.initialClient = { x: touch.clientX, y: touch.clientY };\n    state.current.initialZoom = zoom;\n    state.current.initialOffset = offset;\n    state.current.hasMoved = false;\n    state.current.dragType = null;\n  }, [zoom, offset, resetHideTimer, setIsDraggingState, viewportRef, state]);\n\n  // Handle Touch Move\n  const handleTouchMove = useCallback((e) => {\n    // 1. Pinch Move\n    if (state.current.isPinching && e.touches.length === 2) {\n      const t1 = e.touches[0];\n      const t2 = e.touches[1];\n\n      const dist = Math.hypot(\n        t1.clientX - t2.clientX,\n        t1.clientY - t2.clientY\n      );\n      const scale = dist / state.current.initialPinchDistance;\n      const newZoom = Math.min(Math.max(state.current.initialZoom * scale, 1), 5);\n\n      let newX = 0, newY = 0;\n      if (viewportRef.current) {\n        const rect = viewportRef.current.getBoundingClientRect();\n        const vCenterX = rect.left + rect.width / 2;\n        const vCenterY = rect.top + rect.height / 2;\n        const currentPinchCenter = {\n          x: (t1.clientX + t2.clientX) / 2 - vCenterX,\n          y: (t1.clientY + t2.clientY) / 2 - vCenterY,\n        };\n\n        const ratio = newZoom / state.current.initialZoom;\n        const dx = state.current.initialPinchCenter.x - state.current.initialOffset.x;\n        const dy = state.current.initialPinchCenter.y - state.current.initialOffset.y;\n\n        newX = currentPinchCenter.x - dx * ratio;\n        newY = currentPinchCenter.y - dy * ratio;\n      }\n\n      setZoom(newZoom);\n      setOffset(getClampedOffset(newX, newY, newZoom));\n      return;\n    }\n\n    // 2. Swipe/Drag Move\n    if (!state.current.isDragging || e.touches.length > 1) return;\n\n    const touch = e.touches[0];\n    const dx = touch.clientX - state.current.initialClient.x;\n    const dy = touch.clientY - state.current.initialClient.y;\n\n    if (Math.abs(dx) > 10 || Math.abs(dy) > 10) {\n      state.current.hasMoved = true;\n    }\n\n    if (zoom > 1) {\n      // Pan when zoomed in\n      setOffset(\n        getClampedOffset(\n          state.current.initialOffset.x + dx,\n          state.current.initialOffset.y + dy,\n          zoom\n        )\n      );\n    } else {\n      // Swipe or Dismiss when zoomed out\n      if (!state.current.dragType) {\n        if (Math.abs(dy) > Math.abs(dx) && dy > 0) state.current.dragType = 'dismiss';\n        else if (Math.abs(dx) > Math.abs(dy)) state.current.dragType = 'swipe';\n      }\n\n      if (state.current.dragType === 'dismiss') {\n        setOffset({ x: 0, y: Math.max(0, dy) });\n      } else if (state.current.dragType === 'swipe') {\n        let newX = state.current.initialOffset.x + dx;\n        // Rubber-banding effect\n        if (currentIndex === 0 && newX > 0) newX = newX * 0.3;\n        if (currentIndex === imagesLength - 1 && newX < 0) newX = newX * 0.3;\n        setOffset({ x: newX, y: 0 });\n      }\n    }\n  }, [zoom, currentIndex, imagesLength, getClampedOffset, setOffset, setZoom, viewportRef, state]);\n\n  // Handle Touch End\n  const handleTouchEnd = useCallback((e) => {\n    // 1. Pinch End\n    if (state.current.isPinching && e.touches.length < 2) {\n      state.current.isPinching = false;\n      // Smooth transition to drag if 1 finger remains\n      if (e.touches.length === 1) {\n        const touch = e.touches[0];\n        state.current.isDragging = true;\n        setIsDraggingState(true);\n        state.current.initialClient = { x: touch.clientX, y: touch.clientY };\n        state.current.initialOffset = offset;\n        state.current.initialZoom = zoom;\n        state.current.hasMoved = false;\n        state.current.dragType = null;\n      }\n      return;\n    }\n\n    if (e.touches.length > 0) return;\n\n    // 2. Drag End\n    if (state.current.isDragging && zoom === 1) {\n      if (state.current.dragType === 'dismiss' && offset.y > 100) {\n        onClose();\n        return;\n      } else if (state.current.dragType === 'swipe') {\n        const threshold = containerWidth * 0.2;\n        if (offset.x > threshold) handlePrev();\n        else if (offset.x < -threshold) handleNext();\n      }\n      setOffset({ x: 0, y: 0 });\n    }\n\n    state.current.isDragging = false;\n    setIsDraggingState(false);\n    state.current.dragType = null;\n  }, [zoom, offset, containerWidth, onClose, handlePrev, handleNext, setIsDraggingState, setOffset, state]);\n\n  // Double Tap Zoom logic\n  const handleDoubleTapZoom = useCallback((clientX, clientY, target) => {\n    if (zoom > 1) {\n      setZoom(1);\n      setOffset({ x: 0, y: 0 });\n      state.current.dragType = null;\n    } else {\n      const rect = target.getBoundingClientRect();\n      const x = clientX - (rect.left + rect.width / 2);\n      const y = clientY - (rect.top + rect.height / 2);\n      const targetZoom = 2.5;\n\n      setZoom(targetZoom);\n      setOffset(\n                    getClampedOffset(\n                  -x * (targetZoom - 1),\n                  -y * (targetZoom - 1),\n                  targetZoom\n                )\n              );\n            }\n          }, [zoom, setZoom, setOffset, getClampedOffset, state]);\n  return {\n    handleTouchStart,\n    handleTouchMove,\n    handleTouchEnd,\n    handleDoubleTapZoom,\n    getClampedOffset,\n    // state, // No need to return state\n  };\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 931, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/hooks/useMediaQuery.js"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\n\n/**\n * Custom hook to listen for media queries.\n * @param {string} query - The media query string (e.g., '(pointer: fine)')\n * @returns {boolean} - Whether the query matches\n */\nexport const useMediaQuery = (query) => {\n  const [matches, setMatches] = useState(false);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    const media = window.matchMedia(query);\n    setMatches(media.matches); // Set initial value on mount\n\n    const listener = (e) => setMatches(e.matches);\n\n    // Modern browsers\n    if (media.addEventListener) {\n      media.addEventListener('change', listener);\n      return () => media.removeEventListener('change', listener);\n    } \n    // Legacy support\n    else if (media.addListener) {\n      media.addListener(listener);\n      return () => media.removeListener(listener);\n    }\n  }, [query]);\n\n  return matches;\n};\n\n"],"names":[],"mappings":";;;;;;AAEA;;;;AAFA;;AASO,IAAM,gBAAgB,SAAC;;IAC5B,IAA8B,qLAAA,IAAA,yKAAQ,EAAC,YAAhC,UAAuB,cAAd,aAAc;IAE9B,IAAA,0KAAS;mCAAC;YACR;;YAEA,IAAM,QAAQ,OAAO,UAAU,CAAC;YAChC,WAAW,MAAM,OAAO,GAAG,6BAA6B;YAExD,IAAM;oDAAW,SAAC;2BAAM,WAAW,EAAE,OAAO;;;YAE5C,kBAAkB;YAClB,IAAI,MAAM,gBAAgB,EAAE;gBAC1B,MAAM,gBAAgB,CAAC,UAAU;gBACjC;+CAAO;+BAAM,MAAM,mBAAmB,CAAC,UAAU;;;YACnD,OAEK,IAAI,MAAM,WAAW,EAAE;gBAC1B,MAAM,WAAW,CAAC;gBAClB;+CAAO;+BAAM,MAAM,cAAc,CAAC;;;YACpC;QACF;kCAAG;QAAC;KAAM;IAEV,OAAO;AACT;GAxBa"}},
    {"offset": {"line": 987, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/components/ImageModal.js"],"sourcesContent":["import React, { useEffect, useState, useRef, useCallback } from 'react';\nimport { useTouchHandlers } from '../hooks/useTouchHandlers';\nimport { useMediaQuery } from '../hooks/useMediaQuery';\nimport './ImageModal.css';\n\nconst ImageModal = ({ images = [], initialIndex = 0, onClose }) => {\n  const isFinePointer = useMediaQuery('(pointer: fine)');\n  const [currentIndex, setCurrentIndex] = useState(initialIndex);\n  const [zoom, setZoom] = useState(1);\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\n  const [containerWidth, setContainerWidth] = useState(window.innerWidth);\n  const [showControls, setShowControls] = useState(true);\n  const [isDraggingState, setIsDraggingState] = useState(false);\n  const [isMounting, setIsMounting] = useState(true);\n  const [isResizing, setIsResizing] = useState(false);\n    \n  const viewportRef = useRef(null);\n  const clickTimerRef = useRef(null);\n  const hideTimerRef = useRef(null);\n  const resizeTimerRef = useRef(null);\n    \n  const state = useRef({\n    dragType: null,\n    isDragging: false,\n    hasMoved: false,\n    initialClient: { x: 0, y: 0 },\n    initialZoom: 1,\n    initialOffset: { x: 0, y: 0 },\n    isPinching: false,\n    initialPinchDistance: 0,\n    initialPinchCenter: { x: 0, y: 0 }\n  });\n\n  const resetHideTimer = useCallback(() => {\n    if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n    if (isFinePointer) {\n      hideTimerRef.current = setTimeout(() => {\n        setShowControls(false);\n      }, 2500);\n    }\n  }, [isFinePointer]);\n\n  const resetZoom = useCallback(() => {\n    setZoom(1);\n    setOffset({ x: 0, y: 0 });\n    state.current.dragType = null;\n  }, []);\n\n  const handleNext = useCallback(() => {\n    if (currentIndex < images.length - 1) {\n      setCurrentIndex(prev => prev + 1);\n      resetZoom();\n    }\n  }, [currentIndex, images.length, resetZoom]);\n\n  const handlePrev = useCallback(() => {\n    if (currentIndex > 0) {\n      setCurrentIndex(prev => prev - 1);\n      resetZoom();\n    }\n  }, [currentIndex, resetZoom]);\n\n  const onCloseRef = useRef(onClose);\n  const isPopStateRef = useRef(false);\n  \n  useEffect(() => {\n    onCloseRef.current = onClose;\n  }, [onClose]);\n\n  // Effect 1: History & Scroll Locking (Position: Fixed 방식 원복)\n  useEffect(() => {\n    const scrollY = window.scrollY;\n    const initialPath = window.location.pathname;\n    const originalScrollRestoration = window.history.scrollRestoration;\n\n    if ('scrollRestoration' in window.history) {\n      window.history.scrollRestoration = 'manual';\n    }\n\n    // 현재 위치 고정\n    document.body.style.position = 'fixed';\n    document.body.style.top = `-${scrollY}px`;\n    document.body.style.width = '100%';\n    document.body.style.overflowY = 'hidden';\n\n    const historyTimer = setTimeout(() => {\n      const currentUrl = window.location.pathname + window.location.search;\n      window.history.pushState({ modal: 'image' }, '', currentUrl);\n    }, 10);\n    \n    const handlePopState = () => {\n      isPopStateRef.current = true;\n      if (onCloseRef.current) onCloseRef.current();\n    };\n    \n    window.addEventListener('popstate', handlePopState);\n    const timer = setTimeout(() => setIsMounting(false), 50);\n\n    const updateWidth = () => {\n      if (viewportRef.current) setContainerWidth(viewportRef.current.getBoundingClientRect().width);\n    };\n\n    const resizeObserver = new ResizeObserver(() => {\n      setIsResizing(true);\n      updateWidth();\n      resetZoom();\n      if (resizeTimerRef.current) clearTimeout(resizeTimerRef.current);\n      resizeTimerRef.current = setTimeout(() => setIsResizing(false), 300);\n    });\n\n    if (viewportRef.current) resizeObserver.observe(viewportRef.current);\n    \n    return () => {\n      window.removeEventListener('popstate', handlePopState);\n      clearTimeout(historyTimer);\n      \n      if (!isPopStateRef.current && window.history.state?.modal === 'image') {\n        window.history.back();\n      }\n\n      const scrollPos = document.body.style.top;\n      const currentPath = window.location.pathname;\n\n      // 스타일 복구\n      document.body.style.position = '';\n      document.body.style.top = '';\n      document.body.style.width = '';\n      document.body.style.overflowY = '';\n      \n      if ('scrollRestoration' in window.history) {\n        window.history.scrollRestoration = originalScrollRestoration || 'auto';\n      }\n\n      // 같은 페이지일 때만 수동 스크롤 복구\n      if (scrollPos && currentPath === initialPath) {\n        const restoreY = Math.abs(parseInt(scrollPos, 10));\n        requestAnimationFrame(() => window.scrollTo(0, restoreY));\n      }\n      \n      clearTimeout(timer);\n      if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n      resizeObserver.disconnect();\n    };\n  }, [resetZoom]);\n\n  // Effect 2: Event Listeners\n  useEffect(() => {\n    resetHideTimer();\n    const handleKeyDown = (e) => {\n      setShowControls(true);\n      resetHideTimer();\n      if (e.key === 'ArrowRight') handleNext();\n      if (e.key === 'ArrowLeft') handlePrev();\n      if (e.key === 'Escape') onCloseRef.current?.();\n    };\n    const handleGlobalMouseMove = () => {\n      if (isFinePointer) { setShowControls(true); resetHideTimer(); }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('mousemove', handleGlobalMouseMove);\n    return () => {\n      if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n      if (clickTimerRef.current) clearTimeout(clickTimerRef.current);\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('mousemove', handleGlobalMouseMove);\n    };\n  }, [handleNext, handlePrev, resetHideTimer, isFinePointer]);\n\n  const {\n    handleTouchStart,\n    handleTouchMove,\n    handleTouchEnd,\n    handleDoubleTapZoom,\n    getClampedOffset\n  } = useTouchHandlers({\n    zoom, setZoom, offset, setOffset, viewportRef, currentIndex,\n    imagesLength: images.length, containerWidth, onClose,\n    handlePrev, handleNext, resetHideTimer, setIsDraggingState, state, resetZoom\n  });\n\n  const handleContainerClick = (e) => {\n    if (state.current.hasMoved) return;\n    const { clientX, clientY, target } = e;\n    if (clickTimerRef.current) {\n      clearTimeout(clickTimerRef.current);\n      clickTimerRef.current = null;\n      handleDoubleTapZoom(clientX, clientY, target);\n    } else {\n      clickTimerRef.current = setTimeout(() => {\n        setShowControls(prev => {\n          const next = !prev;\n          if (next) resetHideTimer();\n          else if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n          return next;\n        });\n        clickTimerRef.current = null;\n      }, 250);\n    }\n  };\n\n  const handleMouseDown = useCallback((e) => {\n    resetHideTimer();\n    state.current.isDragging = true;\n    setIsDraggingState(true);\n    state.current.initialClient = { x: e.clientX, y: e.clientY };\n    state.current.initialOffset = offset;\n    state.current.hasMoved = false;\n    state.current.dragType = null;\n  }, [offset, resetHideTimer]);\n\n  const handleMouseMove = useCallback((e) => {\n    if (!state.current.isDragging || e.touches) return;\n    const dx = e.clientX - state.current.initialClient.x;\n    const dy = e.clientY - state.current.initialClient.y;\n    if (Math.abs(dx) > 10 || Math.abs(dy) > 10) {\n      state.current.hasMoved = true;\n      setShowControls(true);\n      resetHideTimer();\n    }\n    if (zoom > 1) {\n      setOffset(getClampedOffset(state.current.initialOffset.x + dx, state.current.initialOffset.y + dy, zoom));\n    } else {\n      if (!state.current.dragType) {\n        if (Math.abs(dy) > Math.abs(dx) && dy > 0) state.current.dragType = 'dismiss';\n        else if (Math.abs(dx) > Math.abs(dy)) state.current.dragType = 'swipe';\n      }\n      if (state.current.dragType === 'dismiss') {\n        setOffset({ x: 0, y: Math.max(0, dy) });\n      } else if (state.current.dragType === 'swipe') {\n        let newX = state.current.initialOffset.x + dx;\n        if (currentIndex === 0 && newX > 0) newX = newX * 0.3;\n        if (currentIndex === images.length - 1 && newX < 0) newX = newX * 0.3;\n        setOffset({ x: newX, y: 0 });\n      }\n    }\n  }, [zoom, getClampedOffset, resetHideTimer, currentIndex, images.length]);\n\n  const handleMouseUp = useCallback(() => {\n    if (state.current.isDragging && zoom === 1) {\n      if (state.current.dragType === 'dismiss' && offset.y > 100) { onClose(); return; }\n      else if (state.current.dragType === 'swipe') {\n        const threshold = containerWidth * 0.2;\n        if (offset.x > threshold) handlePrev();\n        else if (offset.x < -threshold) handleNext();\n      }\n      setOffset({ x: 0, y: 0 });\n    }\n    state.current.isDragging = false;\n    setIsDraggingState(false);\n    state.current.dragType = null;\n  }, [zoom, offset.y, offset.x, handleNext, handlePrev, onClose, containerWidth]);\n\n  const handleWheel = useCallback((e) => {\n    e.preventDefault();\n    const delta = e.deltaY > 0 ? -0.2 : 0.2;\n    const newZoom = Math.min(Math.max(zoom + delta, 1), 5);\n    if (newZoom === zoom) return;\n    if (newZoom === 1) { resetZoom(); return; }\n    if (!viewportRef.current) return;\n    const rect = viewportRef.current.getBoundingClientRect();\n    const mouseX = e.clientX - (rect.left + rect.width / 2);\n    const mouseY = e.clientY - (rect.top + rect.height / 2);\n    const ratio = newZoom / zoom;\n    setZoom(newZoom);\n    setOffset(getClampedOffset(mouseX - (mouseX - offset.x) * ratio, mouseY - (mouseY - offset.y) * ratio, newZoom));\n  }, [zoom, offset, resetZoom, getClampedOffset]);\n\n  const overlayOpacity = state.current.dragType === 'dismiss' ? Math.max(1 - offset.y / 600, 0) : 1;\n\n  return (\n    <div \n      className={`image-modal-overlay ${isDraggingState ? 'is-dragging' : ''}`}\n      style={{ \n        backgroundColor: `rgba(0, 0, 0, ${1.0 * overlayOpacity})`,\n        transform: state.current.dragType === 'dismiss' ? `translate3d(0, ${offset.y}px, 0)` : 'none'\n      }}\n      onMouseDown={handleMouseDown} onMouseMove={handleMouseMove} onMouseUp={handleMouseUp} onMouseLeave={handleMouseUp} \n      onTouchStart={handleTouchStart} onTouchMove={handleTouchMove} onTouchEnd={handleTouchEnd}\n      onClick={handleContainerClick}\n    >\n      <div className=\"image-modal-content-container\">\n        <div className={`image-modal-header-bar ${!showControls ? 'hidden' : ''}`}>\n          <button className=\"modal-universal-back-btn\" onClick={(e) => { e.stopPropagation(); onClose(); }} aria-label=\"Back\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><line x1=\"19\" y1=\"12\" x2=\"5\" y2=\"12\"></line><polyline points=\"12 19 5 12 12 5\"></polyline></svg>\n          </button>\n          <div className=\"image-modal-info\">{currentIndex + 1} / {images.length}</div>\n        </div>\n        <button className={`modal-nav-btn prev ${currentIndex === 0 ? 'disabled' : ''} ${!showControls ? 'hidden' : ''}`} onClick={(e) => { e.stopPropagation(); handlePrev(); }} disabled={currentIndex === 0}>\n          <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><polyline points=\"15 18 9 12 15 6\"></polyline></svg>\n        </button>\n        <button className={`modal-nav-btn next ${currentIndex === images.length - 1 ? 'disabled' : ''} ${!showControls ? 'hidden' : ''}`} onClick={(e) => { e.stopPropagation(); handleNext(); }} disabled={currentIndex === images.length - 1}>\n          <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>\n        </button>\n        <div className=\"image-modal-wrapper fullscreen\">\n          <div className=\"image-modal-viewport fullscreen\" ref={viewportRef}>\n            <div className=\"slider-container\" style={{\n                transform: `translate3d(${-currentIndex * (containerWidth + 40) + (state.current.dragType === 'swipe' ? offset.x : 0)}px, 0, 0)`,\n                transition: (isDraggingState || isMounting || isResizing) ? 'none' : 'transform 0.4s cubic-bezier(0.16, 1, 0.3, 1)'\n              }}>\n              {images.map((img, idx) => (\n                <div key={idx} className=\"slide-item\">\n                  <div className=\"media-movable-content\" style={idx === currentIndex ? { \n                      transform: `translate(${zoom > 1 ? offset.x : 0}px, ${zoom > 1 ? offset.y : 0}px) scale(${zoom})`,\n                      transition: isDraggingState ? 'none' : 'transform 0.3s cubic-bezier(0.2, 0, 0, 1)' \n                    } : {}} onWheel={idx === currentIndex ? handleWheel : null}>\n                    <img src={img.link} alt={img.title || ''} className=\"image-modal-img-internal fullscreen\" draggable=\"false\" />\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n        <div className={`image-modal-footer-bar ${!showControls ? 'hidden' : ''}`}>\n          <div className=\"image-modal-caption\">\n            <div className=\"caption-title\">{images[currentIndex]?.title}</div>\n            <div className=\"caption-meta\">{images[currentIndex]?.meta}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ImageModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1652, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/components/VideoModal.js"],"sourcesContent":["import React, { useEffect, useState, useRef, useCallback } from 'react';\nimport { useMediaQuery } from '../hooks/useMediaQuery';\nimport './VideoModal.css';\n\nconst VideoModal = ({ src, alt, onClose }) => {\n  const isFinePointer = useMediaQuery('(pointer: fine)');\n  const [loading, setLoading] = useState(true);\n  const [offsetY, setOffsetY] = useState(0);\n  const [showControls, setShowControls] = useState(true);\n  const [isDraggingState, setIsDraggingState] = useState(false);\n  const isDragging = useRef(false);\n  const startY = useRef(0);\n  const startX = useRef(0);\n  const initialOffsetY = useRef(0);\n  const hideTimerRef = useRef(null);\n  const hasMoved = useRef(false);\n  const lastToggleTime = useRef(0);\n\n  const resetHideTimer = useCallback(() => {\n    if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n    hideTimerRef.current = setTimeout(() => setShowControls(false), 2500);\n  }, []);\n\n  const onCloseRef = useRef(onClose);\n  const isPopStateRef = useRef(false);\n\n  useEffect(() => {\n    onCloseRef.current = onClose;\n  }, [onClose]);\n\n  // Effect 1: History & Scroll Locking\n  useEffect(() => {\n    const scrollY = window.scrollY;\n    const initialPath = window.location.pathname;\n    const originalScrollRestoration = window.history.scrollRestoration;\n\n    if ('scrollRestoration' in window.history) {\n      window.history.scrollRestoration = 'manual';\n    }\n\n    document.body.style.position = 'fixed';\n    document.body.style.top = `-${scrollY}px`;\n    document.body.style.width = '100%';\n    document.body.style.overflowY = 'hidden';\n\n    const historyTimer = setTimeout(() => {\n      const currentUrl = window.location.pathname + window.location.search;\n      window.history.pushState({ modal: 'video' }, '', currentUrl);\n    }, 10);\n    \n    const handlePopState = () => {\n      isPopStateRef.current = true;\n      if (onCloseRef.current) onCloseRef.current();\n    };\n    \n    window.addEventListener('popstate', handlePopState);\n\n    return () => {\n      window.removeEventListener('popstate', handlePopState);\n      clearTimeout(historyTimer);\n      if (!isPopStateRef.current && window.history.state?.modal === 'video') window.history.back();\n\n      const scrollPos = document.body.style.top;\n      const currentPath = window.location.pathname;\n\n      document.body.style.position = '';\n      document.body.style.top = '';\n      document.body.style.width = '';\n      document.body.style.overflowY = '';\n      \n      if ('scrollRestoration' in window.history) {\n        window.history.scrollRestoration = originalScrollRestoration || 'auto';\n      }\n\n      if (scrollPos && currentPath === initialPath) {\n        const restoreY = Math.abs(parseInt(scrollPos, 10));\n        requestAnimationFrame(() => window.scrollTo(0, restoreY));\n      }\n    };\n  }, []);\n\n  // Effect 2: Event Listeners\n  useEffect(() => {\n    resetHideTimer();\n    const handleKeyDown = (e) => {\n      setShowControls(true);\n      resetHideTimer();\n      if (e.key === 'Escape') onCloseRef.current?.();\n    };\n    const handleMouseMove = () => {\n      if (isFinePointer) { setShowControls(true); resetHideTimer(); }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('mousemove', handleMouseMove);\n    return () => {\n      if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('mousemove', handleMouseMove);\n    };\n  }, [resetHideTimer, isFinePointer]);\n\n  const handleStart = (e) => {\n    isDragging.current = true;\n    setIsDraggingState(true);\n    hasMoved.current = false;\n    const clientY = e.type === 'touchstart' ? e.touches[0].clientY : e.clientY;\n    const clientX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;\n    startY.current = clientY;\n    startX.current = clientX;\n    initialOffsetY.current = offsetY;\n  };\n\n  const handleMove = (e) => {\n    if (!isDragging.current) return;\n    const clientY = e.type === 'touchmove' ? e.touches[0].clientY : e.clientY;\n    const clientX = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;\n    const dy = clientY - startY.current;\n    const dx = clientX - startX.current;\n    if (Math.abs(dy) > 20 || Math.abs(dx) > 20) {\n      hasMoved.current = true;\n      setShowControls(true);\n      resetHideTimer();\n    }\n    const newY = initialOffsetY.current + dy;\n    if (newY >= 0) setOffsetY(newY);\n  };\n\n  const handleContainerClick = useCallback((e) => {\n    if (hasMoved.current || offsetY > 10 || isFinePointer) return;\n    const now = Date.now();\n    if (now - lastToggleTime.current < 300) return;\n    lastToggleTime.current = now;\n    setShowControls(prev => {\n      const next = !prev;\n      if (next) resetHideTimer();\n      else if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n      return next;\n    });\n  }, [resetHideTimer, offsetY, isFinePointer]);\n\n  const handleEnd = useCallback((e) => {\n    if (!isDragging.current) return;\n    if (offsetY > 100) { onClose(); } \n    else {\n      setOffsetY(0);\n      if (!hasMoved.current) handleContainerClick(e);\n    }\n    isDragging.current = false;\n    setIsDraggingState(false);\n    startY.current = 0;\n    startX.current = 0;\n    setTimeout(() => { hasMoved.current = false; }, 150);\n  }, [offsetY, onClose, handleContainerClick]);\n\n  const getYouTubeVideoId = (url) => {\n    if (!url) return null;\n    const patterns = [\n      /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/|youtube\\.com\\/embed\\/)([^&\\n?#]+)/,\n      /youtube\\.com\\/watch\\?.*v=([^&\\n?#]+)/\n    ];\n    for (const pattern of patterns) {\n      const match = url.match(pattern);\n      if (match && match[1]) return match[1];\n    }\n    return null;\n  };\n\n  const overlayOpacity = Math.max(1 - offsetY / 600, 0);\n  if (!src) return null;\n  const isYouTube = src.includes('youtube.com') || src.includes('youtu.be');\n\n  return (\n    <div \n      className={`video-modal-overlay ${isDraggingState ? 'is-dragging' : ''}`}\n      onMouseDown={handleStart} onTouchStart={handleStart} onMouseMove={handleMove} onTouchMove={handleMove}\n      onMouseUp={handleEnd} onTouchEnd={handleEnd} onMouseLeave={handleEnd} onClick={handleContainerClick}\n      style={{ backgroundColor: `rgba(0, 0, 0, ${1.0 * overlayOpacity})`, transform: `translate3d(0, ${offsetY}px, 0)` }}\n    >\n      <div className=\"video-modal-content-container\">\n        <button className={`video-modal-close-btn ${!showControls ? 'hidden' : ''}`} onClick={(e) => { e.stopPropagation(); onClose(); }} aria-label=\"Close\" >&times;</button>\n        <div className=\"video-modal-wrapper\">\n          {loading && <div className=\"video-modal-loader\" />}\n          {isYouTube ? (\n            <iframe\n              src={`https://www.youtube.com/embed/${getYouTubeVideoId(src)}?autoplay=1`}\n              title={alt || 'YouTube video'}\n              className=\"video-modal-element\"\n              frameBorder=\"0\"\n              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n              allowFullScreen\n              onLoad={() => setLoading(false)}\n            />\n          ) : (\n            <video\n              src={src}\n              className=\"video-modal-element\"\n              controls\n              autoPlay\n              playsInline\n              onLoadedData={() => setLoading(false)}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VideoModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1997, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/assets/icons/menu-icon.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 24, height: 24, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;;AAAA;;;uCACe;IAAE,KAAA,2JAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 2019, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/components/PageHeader.js"],"sourcesContent":["import React from 'react';\nimport './PageHeader.css';\nimport { useAppData } from '../context/AppDataContext';\nimport menuIcon from '../assets/icons/menu-icon.svg';\n\nconst PageHeader = ({ title }) => {\n  const { toggleMenu } = useAppData();\n\n  return (\n    <header className=\"page-header\">\n      <h1 className=\"page-header-title\">{title}</h1>\n      <div className=\"common-menu-icon\" onClick={toggleMenu}>\n        <img \n          src={menuIcon.src || menuIcon} \n          alt=\"Menu\" \n          className=\"menu-icon-img\" \n          width=\"24\" \n          height=\"24\"\n        />\n      </div>\n    </header>\n  );\n};\n\nexport default PageHeader;\n"],"names":[],"mappings":";;;;;;AAAA;AAEA;AACA;;;;;;;;;AAEA,IAAM,aAAa;QAAG,cAAA;;IACpB,IAAM,AAAE,aAAe,IAAA,iJAAU,IAAzB;IAER,qBACE,6LAAC;QAAO,WAAU;;0BAChB,6LAAC;gBAAG,WAAU;0BAAqB;;;;;;0BACnC,6LAAC;gBAAI,WAAU;gBAAmB,SAAS;0BACzC,cAAA,6LAAC;oBACC,KAAK,4VAAQ,CAAC,GAAG,IAAI,4VAAQ;oBAC7B,KAAI;oBACJ,WAAU;oBACV,OAAM;oBACN,QAAO;;;;;;;;;;;;;;;;;AAKjB;GAjBM;;QACmB,iJAAU;;;KAD7B;uCAmBS"}},
    {"offset": {"line": 2093, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/app/works/page.js"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, Suspense } from 'react';\nimport './page.css';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { useAppData } from '../../context/AppDataContext';\nimport { SkeletonWorkItem } from '../../components/Skeleton';\nimport MediaDisplay from '../../components/MediaDisplay';\nimport YearNav from '../../components/YearNav';\nimport ImageModal from '../../components/ImageModal';\nimport VideoModal from '../../components/VideoModal';\nimport PageHeader from '../../components/PageHeader';\n\nconst WorksContent = () => {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const { works, fetchAllData } = useAppData();\n  const [selectedMedia, setSelectedMedia] = useState(null);\n\n  // works 데이터가 없으면 fetchAllData 호출\n  useEffect(() => {\n    if (!works) {\n      fetchAllData();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [works, fetchAllData]);\n\n  const worksArray = Array.isArray(works) ? works : [];\n  const wholeYears = [...new Set(worksArray.map(work => work.year))]\n   .sort((a, b) => b - a);\n  \n  const urlYear = searchParams.get('year');\n  // URL에서 연도를 가져오거나, 없으면 최신 연도를 사용합니다.\n  const selectedYear = urlYear || wholeYears[0] || '2025';\n\n  const handleYearClick = (year) => {\n    // replace: true를 사용하여 히스토리에 연도별로 쌓이지 않게 합니다.\n    // Next.js router.replace performs a client-side navigation.\n    router.replace(`/works?year=${year}`, { scroll: false });\n  };\n\n  const [isMounted, setIsMounted] = useState(false);\n  const [windowWidth, setWindowWidth] = useState(0);\n\n  useEffect(() => {\n    setIsMounted(true);\n    setWindowWidth(window.innerWidth);\n    const handleResize = () => setWindowWidth(window.innerWidth);\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const getNumColumns = () => {\n    if (windowWidth < 532) return 1;\n    if (windowWidth < 1080) return 2;\n    return 3;\n  };\n\n  const numColumns = isMounted ? getNumColumns() : 3; // SSR default to 3 but we'll use CSS to hide\n\n  const filteredWorks = worksArray.filter(work => work.year === selectedYear);\n  \n  // 데이터를 열 개수에 맞춰 분배 (좌->우 순서 유지)\n  const columns = Array.from({ length: numColumns }, () => []);\n  filteredWorks.forEach((work, index) => {\n    columns[index % numColumns].push(work);\n  });\n\n  // 이미지들만 필터링 (네비게이션용)\n  const imageItems = filteredWorks.filter(item => {\n    const link = item.link?.toLowerCase() || \"\";\n    return !link.endsWith('.mp4') && !link.includes('youtube.com') && !link.includes('youtu.be');\n  });\n\n  const handleMediaClick = (item) => {\n    const link = item.link?.toLowerCase() || \"\";\n    const isVideo = link.endsWith('.mp4') || link.includes('youtube.com') || link.includes('youtu.be');\n    \n    if (isVideo) {\n      setSelectedMedia({ type: 'video', src: item.link, alt: item.title });\n    } else {\n      const index = imageItems.findIndex(img => img.link === item.link);\n      setSelectedMedia({ type: 'image', items: imageItems, index: index });\n    }\n  };\n\n  const handleCloseImageModal = () => {\n    setSelectedMedia(null);\n  };\n\n  return (\n    <div className=\"works-container\">\n      <PageHeader title=\"WORKS\" />\n\n      <YearNav\n        years={wholeYears}\n        selectedYear={selectedYear}\n        onSelect={handleYearClick}\n        loading={!works}\n      />\n\n      <div className=\"works-list\">\n        {!works ? (\n          // 로딩 중일 때도 열 구조를 맞춰서 스켈레톤 표시 (3개 행 정도로 늘림)\n          Array.from({ length: numColumns }).map((_, colIdx) => (\n            <div key={colIdx} className=\"works-column\">\n              <SkeletonWorkItem />\n              <SkeletonWorkItem />\n              <SkeletonWorkItem />\n            </div>\n          ))\n        ) : (\n          columns.map((column, colIdx) => (\n            <div key={colIdx} className=\"works-column\">\n              {column.map((work) => (\n                <div className=\"work-item\" key={work.id}>\n                  <MediaDisplay \n                    src={work.link} \n                    alt={work.title} \n                    className=\"work-image\" \n                    controls={true} \n                    onClick={() => handleMediaClick(work)}\n                  />\n                  <div className=\"work-info\">\n                    <div className=\"work-title\">{work.title}</div>\n                    <div className=\"work-meta\">{work.meta}</div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ))\n        )}\n      </div>\n\n      {selectedMedia?.type === 'image' && (\n        <ImageModal \n          images={selectedMedia.items}\n          initialIndex={selectedMedia.index}\n          onClose={handleCloseImageModal} \n        />\n      )}\n\n      {selectedMedia?.type === 'video' && (\n        <VideoModal \n          src={selectedMedia.src}\n          alt={selectedMedia.alt}\n          onClose={() => setSelectedMedia(null)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default function WorksPage() {\n  return (\n    <Suspense fallback={<div className=\"works-container\"><PageHeader title=\"WORKS\" /><div className=\"works-list\"><SkeletonWorkItem /></div></div>}>\n      <WorksContent />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}