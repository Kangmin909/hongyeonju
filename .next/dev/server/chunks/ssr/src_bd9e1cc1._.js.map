{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/components/MediaDisplay.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './MediaDisplay.css';\n\n// 한 번 로드된 이미지 URL을 기억하여 재방문 시 깜빡임을 방지합니다.\nconst loadedImageCache = new Set();\n\n// 유튜브 URL에서 비디오 ID 추출\nconst getYouTubeVideoId = (url) => {\n  if (!url) return null;\n  \n  const patterns = [\n    /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/|youtube\\.com\\/embed\\/)([^&\\n?#]+)/,\n    /youtube\\.com\\/watch\\?.*v=([^&\\n?#]+)/\n  ];\n  \n  for (const pattern of patterns) {\n    const match = url.match(pattern);\n    if (match && match[1]) {\n      return match[1];\n    }\n  }\n  \n  return null;\n};\n\n// 유튜브 URL인지 확인\nconst isYouTubeUrl = (url) => {\n  return getYouTubeVideoId(url) !== null;\n};\n\n// MediaDisplay 컴포넌트\nconst MediaDisplay = ({ src, alt, className, autoplay = false, controls = false, onClick }) => {\n  const [hasError, setHasError] = useState(false);\n  // 캐시에 있으면 즉시 로드된 상태로 시작합니다.\n  const [isLoaded, setIsLoaded] = useState(() => src ? loadedImageCache.has(src) : false);\n\n  useEffect(() => {\n    if (isLoaded && src) {\n      loadedImageCache.add(src);\n    }\n  }, [isLoaded, src]);\n\n  const shouldShowShimmer = !isLoaded && !hasError && src;\n  const wrapperClass = `media-placeholder-wrapper ${shouldShowShimmer ? 'loading-shimmer' : ''} ${isLoaded ? 'is-loaded' : ''} ${className || ''}`;\n\n  if (hasError || !src) {\n    return (\n      <div \n        className={wrapperClass} \n        style={{ \n          display: 'flex', \n          alignItems: 'center', \n          justifyContent: 'center', \n          backgroundColor: '#f2f2f2',\n          aspectRatio: '4 / 3', // 에러 시에도 비율 강제 유지\n          width: '100%'\n        }}\n      >\n        <div className=\"media-error-message\">이미지를 불러오지 못했습니다.</div>\n      </div>\n    );\n  }\n\n  const clickOverlayStyle = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    cursor: 'pointer',\n    zIndex: 10,\n    background: 'transparent'\n  };\n\n  if (isYouTubeUrl(src)) {\n    const videoId = getYouTubeVideoId(src);\n    const autoplayParams = 'autoplay=1&mute=1&loop=1&playlist=' + videoId;\n    const embedUrl = `https://www.youtube.com/embed/${videoId}?${autoplayParams}`;\n    \n    return (\n      <div className={wrapperClass}>\n        <div className=\"media-container\">\n          <iframe\n            src={embedUrl}\n            title={alt || 'YouTube video'}\n            className=\"media-iframe\"\n            frameBorder=\"0\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            allowFullScreen\n            onLoad={() => setIsLoaded(true)}\n            onError={() => setHasError(true)}\n          />\n          {onClick && <div style={clickOverlayStyle} onClick={onClick} />}\n        </div>\n      </div>\n    );\n  }\n\n  // Ensure src is a string before checking extension\n  const srcString = String(src || \"\");\n\n  if (srcString.toLowerCase().endsWith('.mp4')) {\n    return (\n      <div className={wrapperClass}>\n        <video\n          src={src}\n          className=\"media-element\"\n          autoPlay={autoplay}\n          muted={autoplay}\n          loop={autoplay}\n          playsInline\n          controls={controls}\n          onLoadedData={() => setIsLoaded(true)}\n          onError={() => setHasError(true)}\n          onClick={onClick}\n          style={onClick ? { cursor: 'pointer' } : {}}\n        />\n        {onClick && !controls && <div style={clickOverlayStyle} onClick={onClick} />}\n      </div>\n    );\n  }\n\n  return (\n    <div className={wrapperClass}>\n      <img \n        src={src} \n        alt={alt || \"Media content\"} \n        className=\"media-element\"\n        onLoad={() => setIsLoaded(true)}\n        onError={() => setHasError(true)}\n        onClick={onClick}\n        style={onClick ? { cursor: 'pointer' } : {}}\n      />\n    </div>\n  );\n};\n\nexport default MediaDisplay;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/components/Skeleton.js"],"sourcesContent":["import React from 'react';\nimport './Skeleton.css';\n\n// 기본 스켈레톤 박스\nexport const SkeletonBox = ({ width, height, className = '' }) => {\n  return (\n    <div \n      className={`skeleton-box ${className}`}\n      style={{ width, height }}\n    />\n  );\n};\n\n// 텍스트 스켈레톤\nexport const SkeletonText = ({ lines = 1, width = '100%' }) => {\n  return (\n    <div className=\"skeleton-text-container\">\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className=\"skeleton-text\"\n          style={{ \n            width: index === lines - 1 ? '80%' : width,\n            marginBottom: index < lines - 1 ? '6px' : '0'\n          }}\n        />\n      ))}\n    </div>\n  );\n};\n\n// 이미지 스켈레톤\nexport const SkeletonImage = ({ width = '100%', height = '200px', className = '' }) => {\n  return (\n    <div \n      className={`skeleton-image ${className}`}\n      style={{ width, height }}\n    />\n  );\n};\n\n// 작품 아이템 스켈레톤\nexport const SkeletonWorkItem = () => {\n  return (\n    <div className=\"skeleton-work-item\">\n      <SkeletonImage height=\"auto\" className=\"skeleton-work-image\" />\n      <div className=\"skeleton-work-info\">\n        <SkeletonText lines={1} width=\"60%\" />\n        <SkeletonText lines={1} width=\"80%\" />\n      </div>\n    </div>\n  );\n};\n\n// 전시 아이템 스켈레톤\nexport const SkeletonExhibitionItem = () => {\n  return (\n    <div className=\"skeleton-exhibition-item\">\n      <SkeletonImage height=\"auto\" className=\"skeleton-exhibition-image\" />\n      <div className=\"skeleton-exhibition-info\">\n        <SkeletonBox width=\"70%\" height=\"24px\" style={{ marginBottom: '10px' }} />\n        <SkeletonText lines={1} width=\"50%\" />\n        <SkeletonText lines={1} width=\"60%\" />\n      </div>\n    </div>\n  );\n};\n\n// CV 리스트 아이템 스켈레톤\nexport const SkeletonCVItem = () => {\n  return (\n    <div className=\"skeleton-cv-item\">\n      <SkeletonBox width=\"34px\" height=\"17px\" />\n      <SkeletonText lines={1} width=\"200px\" />\n    </div>\n  );\n};\n\n// Home 이미지 스켈레톤\nexport const SkeletonHomeImage = () => {\n  return (\n    <div className=\"skeleton-home-image\">\n      <SkeletonImage width=\"100%\" height=\"100%\" />\n    </div>\n  );\n};\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA;;;;AAIO,MAAM,cAAc,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE;IAC3D,qBACE,8OAAC;QACC,WAAW,CAAC,aAAa,EAAE,WAAW;QACtC,OAAO;YAAE;YAAO;QAAO;;;;;;AAG7B;AAGO,MAAM,eAAe,CAAC,EAAE,QAAQ,CAAC,EAAE,QAAQ,MAAM,EAAE;IACxD,qBACE,8OAAC;QAAI,WAAU;kBACZ,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAM,GAAG,GAAG,CAAC,CAAC,GAAG,sBACrC,8OAAC;gBAEC,WAAU;gBACV,OAAO;oBACL,OAAO,UAAU,QAAQ,IAAI,QAAQ;oBACrC,cAAc,QAAQ,QAAQ,IAAI,QAAQ;gBAC5C;eALK;;;;;;;;;;AAUf;AAGO,MAAM,gBAAgB,CAAC,EAAE,QAAQ,MAAM,EAAE,SAAS,OAAO,EAAE,YAAY,EAAE,EAAE;IAChF,qBACE,8OAAC;QACC,WAAW,CAAC,eAAe,EAAE,WAAW;QACxC,OAAO;YAAE;YAAO;QAAO;;;;;;AAG7B;AAGO,MAAM,mBAAmB;IAC9B,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAc,QAAO;gBAAO,WAAU;;;;;;0BACvC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAa,OAAO;wBAAG,OAAM;;;;;;kCAC9B,8OAAC;wBAAa,OAAO;wBAAG,OAAM;;;;;;;;;;;;;;;;;;AAItC;AAGO,MAAM,yBAAyB;IACpC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAc,QAAO;gBAAO,WAAU;;;;;;0BACvC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAY,OAAM;wBAAM,QAAO;wBAAO,OAAO;4BAAE,cAAc;wBAAO;;;;;;kCACrE,8OAAC;wBAAa,OAAO;wBAAG,OAAM;;;;;;kCAC9B,8OAAC;wBAAa,OAAO;wBAAG,OAAM;;;;;;;;;;;;;;;;;;AAItC;AAGO,MAAM,iBAAiB;IAC5B,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAY,OAAM;gBAAO,QAAO;;;;;;0BACjC,8OAAC;gBAAa,OAAO;gBAAG,OAAM;;;;;;;;;;;;AAGpC;AAGO,MAAM,oBAAoB;IAC/B,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAc,OAAM;YAAO,QAAO;;;;;;;;;;;AAGzC"}},
    {"offset": {"line": 411, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/hooks/useTouchHandlers.js"],"sourcesContent":["import { useCallback } from 'react';\n\n/**\n * Custom hook to handle touch gestures (Swipe & Pinch-to-Zoom) for the ImageModal.\n */\nexport const useTouchHandlers = ({\n  zoom,\n  setZoom,\n  offset,\n  setOffset,\n  viewportRef,\n  currentIndex,\n  imagesLength,\n  containerWidth,\n  onClose,\n  handlePrev,\n  handleNext,\n  resetHideTimer,\n  setIsDraggingState,\n  state, // External ref\n  resetZoom, // External function\n}) => {\n  // state is passed from parent\n\n  // Calculate clamped offset to keep image within viewport\n  const getClampedOffset = useCallback((newX, newY, currentZoom) => {\n    if (!viewportRef.current) return { x: newX, y: newY };\n\n    const vWidth = viewportRef.current.offsetWidth;\n    const vHeight = viewportRef.current.offsetHeight;\n    const iWidth = vWidth * currentZoom;\n    const iHeight = vHeight * currentZoom;\n\n    let maxX = 0, maxY = 0;\n    if (iWidth > vWidth) maxX = (iWidth - vWidth) / 2;\n    if (iHeight > vHeight) maxY = (iHeight - vHeight) / 2;\n\n    return {\n      x: Math.max(-maxX, Math.min(maxX, newX)),\n      y: Math.max(-maxY, Math.min(maxY, newY)),\n    };\n  }, [viewportRef]);\n\n  // Handle Touch Start\n  const handleTouchStart = useCallback((e) => {\n    resetHideTimer();\n\n    // 1. Pinch Start (2 fingers)\n    if (e.touches.length === 2) {\n      state.current.isPinching = true;\n\n      const t1 = e.touches[0];\n      const t2 = e.touches[1];\n\n      state.current.initialPinchDistance = Math.hypot(\n        t1.clientX - t2.clientX,\n        t1.clientY - t2.clientY\n      );\n      state.current.initialZoom = zoom;\n      state.current.initialOffset = offset;\n\n      // Calculate pinch center relative to viewport\n      if (viewportRef.current) {\n        const rect = viewportRef.current.getBoundingClientRect();\n        const vCenterX = rect.left + rect.width / 2;\n        const vCenterY = rect.top + rect.height / 2;\n        state.current.initialPinchCenter = {\n          x: (t1.clientX + t2.clientX) / 2 - vCenterX,\n          y: (t1.clientY + t2.clientY) / 2 - vCenterY,\n        };\n      } else {\n        state.current.initialPinchCenter = { x: 0, y: 0 };\n      }\n      return;\n    }\n\n    // 2. Swipe/Drag Start (1 finger)\n    const touch = e.touches[0];\n    // Prevent conflict with iOS back swipe (left edge)\n    if (touch.clientX < 40) return;\n\n    state.current.isDragging = true;\n    setIsDraggingState(true);\n    state.current.initialClient = { x: touch.clientX, y: touch.clientY };\n    state.current.initialZoom = zoom;\n    state.current.initialOffset = offset;\n    state.current.hasMoved = false;\n    state.current.dragType = null;\n  }, [zoom, offset, resetHideTimer, setIsDraggingState, viewportRef, state]);\n\n  // Handle Touch Move\n  const handleTouchMove = useCallback((e) => {\n    // 1. Pinch Move\n    if (state.current.isPinching && e.touches.length === 2) {\n      const t1 = e.touches[0];\n      const t2 = e.touches[1];\n\n      const dist = Math.hypot(\n        t1.clientX - t2.clientX,\n        t1.clientY - t2.clientY\n      );\n      const scale = dist / state.current.initialPinchDistance;\n      const newZoom = Math.min(Math.max(state.current.initialZoom * scale, 1), 5);\n\n      let newX = 0, newY = 0;\n      if (viewportRef.current) {\n        const rect = viewportRef.current.getBoundingClientRect();\n        const vCenterX = rect.left + rect.width / 2;\n        const vCenterY = rect.top + rect.height / 2;\n        const currentPinchCenter = {\n          x: (t1.clientX + t2.clientX) / 2 - vCenterX,\n          y: (t1.clientY + t2.clientY) / 2 - vCenterY,\n        };\n\n        const ratio = newZoom / state.current.initialZoom;\n        const dx = state.current.initialPinchCenter.x - state.current.initialOffset.x;\n        const dy = state.current.initialPinchCenter.y - state.current.initialOffset.y;\n\n        newX = currentPinchCenter.x - dx * ratio;\n        newY = currentPinchCenter.y - dy * ratio;\n      }\n\n      setZoom(newZoom);\n      setOffset(getClampedOffset(newX, newY, newZoom));\n      return;\n    }\n\n    // 2. Swipe/Drag Move\n    if (!state.current.isDragging || e.touches.length > 1) return;\n\n    const touch = e.touches[0];\n    const dx = touch.clientX - state.current.initialClient.x;\n    const dy = touch.clientY - state.current.initialClient.y;\n\n    if (Math.abs(dx) > 10 || Math.abs(dy) > 10) {\n      state.current.hasMoved = true;\n    }\n\n    if (zoom > 1) {\n      // Pan when zoomed in\n      setOffset(\n        getClampedOffset(\n          state.current.initialOffset.x + dx,\n          state.current.initialOffset.y + dy,\n          zoom\n        )\n      );\n    } else {\n      // Swipe or Dismiss when zoomed out\n      if (!state.current.dragType) {\n        if (Math.abs(dy) > Math.abs(dx) && dy > 0) state.current.dragType = 'dismiss';\n        else if (Math.abs(dx) > Math.abs(dy)) state.current.dragType = 'swipe';\n      }\n\n      if (state.current.dragType === 'dismiss') {\n        setOffset({ x: 0, y: Math.max(0, dy) });\n      } else if (state.current.dragType === 'swipe') {\n        let newX = state.current.initialOffset.x + dx;\n        // Rubber-banding effect\n        if (currentIndex === 0 && newX > 0) newX = newX * 0.3;\n        if (currentIndex === imagesLength - 1 && newX < 0) newX = newX * 0.3;\n        setOffset({ x: newX, y: 0 });\n      }\n    }\n  }, [zoom, currentIndex, imagesLength, getClampedOffset, setOffset, setZoom, viewportRef, state]);\n\n  // Handle Touch End\n  const handleTouchEnd = useCallback((e) => {\n    // 1. Pinch End\n    if (state.current.isPinching && e.touches.length < 2) {\n      state.current.isPinching = false;\n      // Smooth transition to drag if 1 finger remains\n      if (e.touches.length === 1) {\n        const touch = e.touches[0];\n        state.current.isDragging = true;\n        setIsDraggingState(true);\n        state.current.initialClient = { x: touch.clientX, y: touch.clientY };\n        state.current.initialOffset = offset;\n        state.current.initialZoom = zoom;\n        state.current.hasMoved = false;\n        state.current.dragType = null;\n      }\n      return;\n    }\n\n    if (e.touches.length > 0) return;\n\n    // 2. Drag End\n    if (state.current.isDragging && zoom === 1) {\n      if (state.current.dragType === 'dismiss' && offset.y > 100) {\n        onClose();\n        return;\n      } else if (state.current.dragType === 'swipe') {\n        const threshold = containerWidth * 0.2;\n        if (offset.x > threshold) handlePrev();\n        else if (offset.x < -threshold) handleNext();\n      }\n      setOffset({ x: 0, y: 0 });\n    }\n\n    state.current.isDragging = false;\n    setIsDraggingState(false);\n    state.current.dragType = null;\n  }, [zoom, offset, containerWidth, onClose, handlePrev, handleNext, setIsDraggingState, setOffset, state]);\n\n  // Double Tap Zoom logic\n  const handleDoubleTapZoom = useCallback((clientX, clientY, target) => {\n    if (zoom > 1) {\n      setZoom(1);\n      setOffset({ x: 0, y: 0 });\n      state.current.dragType = null;\n    } else {\n      const rect = target.getBoundingClientRect();\n      const x = clientX - (rect.left + rect.width / 2);\n      const y = clientY - (rect.top + rect.height / 2);\n      const targetZoom = 2.5;\n\n      setZoom(targetZoom);\n      setOffset(\n                    getClampedOffset(\n                  -x * (targetZoom - 1),\n                  -y * (targetZoom - 1),\n                  targetZoom\n                )\n              );\n            }\n          }, [zoom, setZoom, setOffset, getClampedOffset, state]);\n  return {\n    handleTouchStart,\n    handleTouchMove,\n    handleTouchEnd,\n    handleDoubleTapZoom,\n    getClampedOffset,\n    // state, // No need to return state\n  };\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 647, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/hooks/useMediaQuery.js"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\n\n/**\n * Custom hook to listen for media queries.\n * @param {string} query - The media query string (e.g., '(pointer: fine)')\n * @returns {boolean} - Whether the query matches\n */\nexport const useMediaQuery = (query) => {\n  const [matches, setMatches] = useState(false);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    const media = window.matchMedia(query);\n    setMatches(media.matches); // Set initial value on mount\n\n    const listener = (e) => setMatches(e.matches);\n\n    // Modern browsers\n    if (media.addEventListener) {\n      media.addEventListener('change', listener);\n      return () => media.removeEventListener('change', listener);\n    } \n    // Legacy support\n    else if (media.addListener) {\n      media.addListener(listener);\n      return () => media.removeListener(listener);\n    }\n  }, [query]);\n\n  return matches;\n};\n\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AASO,MAAM,gBAAgB,CAAC;IAC5B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,wCAAmC;;;QAEnC,MAAM;QAGN,MAAM;IAYR,GAAG;QAAC;KAAM;IAEV,OAAO;AACT"}},
    {"offset": {"line": 671, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/components/ImageModal.js"],"sourcesContent":["import React, { useEffect, useState, useRef, useCallback } from 'react';\nimport { useTouchHandlers } from '../hooks/useTouchHandlers';\nimport { useMediaQuery } from '../hooks/useMediaQuery';\nimport './ImageModal.css';\n\nconst ImageModal = ({ images = [], initialIndex = 0, onClose }) => {\n  const isFinePointer = useMediaQuery('(pointer: fine)');\n  const [currentIndex, setCurrentIndex] = useState(initialIndex);\n  const [zoom, setZoom] = useState(1);\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\n  const [containerWidth, setContainerWidth] = useState(window.innerWidth);\n  const [showControls, setShowControls] = useState(true);\n  const [isDraggingState, setIsDraggingState] = useState(false);\n  const [isMounting, setIsMounting] = useState(true);\n  const [isResizing, setIsResizing] = useState(false);\n    \n  const viewportRef = useRef(null);\n  const clickTimerRef = useRef(null);\n  const hideTimerRef = useRef(null);\n  const resizeTimerRef = useRef(null);\n    \n  const state = useRef({\n    dragType: null,\n    isDragging: false,\n    hasMoved: false,\n    initialClient: { x: 0, y: 0 },\n    initialZoom: 1,\n    initialOffset: { x: 0, y: 0 },\n    isPinching: false,\n    initialPinchDistance: 0,\n    initialPinchCenter: { x: 0, y: 0 }\n  });\n\n  const resetHideTimer = useCallback(() => {\n    if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n    if (isFinePointer) {\n      hideTimerRef.current = setTimeout(() => {\n        setShowControls(false);\n      }, 2500);\n    }\n  }, [isFinePointer]);\n\n  const resetZoom = useCallback(() => {\n    setZoom(1);\n    setOffset({ x: 0, y: 0 });\n    state.current.dragType = null;\n  }, []);\n\n  const handleNext = useCallback(() => {\n    if (currentIndex < images.length - 1) {\n      setCurrentIndex(prev => prev + 1);\n      resetZoom();\n    }\n  }, [currentIndex, images.length, resetZoom]);\n\n  const handlePrev = useCallback(() => {\n    if (currentIndex > 0) {\n      setCurrentIndex(prev => prev - 1);\n      resetZoom();\n    }\n  }, [currentIndex, resetZoom]);\n\n  const onCloseRef = useRef(onClose);\n  const isPopStateRef = useRef(false);\n  \n  useEffect(() => {\n    onCloseRef.current = onClose;\n  }, [onClose]);\n\n  // Effect 1: History & Scroll Locking (Position: Fixed 방식 원복)\n  useEffect(() => {\n    const scrollY = window.scrollY;\n    const initialPath = window.location.pathname;\n    const originalScrollRestoration = window.history.scrollRestoration;\n\n    if ('scrollRestoration' in window.history) {\n      window.history.scrollRestoration = 'manual';\n    }\n\n    // 현재 위치 고정\n    document.body.style.position = 'fixed';\n    document.body.style.top = `-${scrollY}px`;\n    document.body.style.width = '100%';\n    document.body.style.overflowY = 'hidden';\n\n    const historyTimer = setTimeout(() => {\n      const currentUrl = window.location.pathname + window.location.search;\n      window.history.pushState({ modal: 'image' }, '', currentUrl);\n    }, 10);\n    \n    const handlePopState = () => {\n      isPopStateRef.current = true;\n      if (onCloseRef.current) onCloseRef.current();\n    };\n    \n    window.addEventListener('popstate', handlePopState);\n    const timer = setTimeout(() => setIsMounting(false), 50);\n\n    const updateWidth = () => {\n      if (viewportRef.current) setContainerWidth(viewportRef.current.getBoundingClientRect().width);\n    };\n\n    const resizeObserver = new ResizeObserver(() => {\n      setIsResizing(true);\n      updateWidth();\n      resetZoom();\n      if (resizeTimerRef.current) clearTimeout(resizeTimerRef.current);\n      resizeTimerRef.current = setTimeout(() => setIsResizing(false), 300);\n    });\n\n    if (viewportRef.current) resizeObserver.observe(viewportRef.current);\n    \n    return () => {\n      window.removeEventListener('popstate', handlePopState);\n      clearTimeout(historyTimer);\n      \n      if (!isPopStateRef.current && window.history.state?.modal === 'image') {\n        window.history.back();\n      }\n\n      const scrollPos = document.body.style.top;\n      const currentPath = window.location.pathname;\n\n      // 스타일 복구\n      document.body.style.position = '';\n      document.body.style.top = '';\n      document.body.style.width = '';\n      document.body.style.overflowY = '';\n      \n      if ('scrollRestoration' in window.history) {\n        window.history.scrollRestoration = originalScrollRestoration || 'auto';\n      }\n\n      // 같은 페이지일 때만 수동 스크롤 복구\n      if (scrollPos && currentPath === initialPath) {\n        const restoreY = Math.abs(parseInt(scrollPos, 10));\n        requestAnimationFrame(() => window.scrollTo(0, restoreY));\n      }\n      \n      clearTimeout(timer);\n      if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n      resizeObserver.disconnect();\n    };\n  }, [resetZoom]);\n\n  // Effect 2: Event Listeners\n  useEffect(() => {\n    resetHideTimer();\n    const handleKeyDown = (e) => {\n      setShowControls(true);\n      resetHideTimer();\n      if (e.key === 'ArrowRight') handleNext();\n      if (e.key === 'ArrowLeft') handlePrev();\n      if (e.key === 'Escape') onCloseRef.current?.();\n    };\n    const handleGlobalMouseMove = () => {\n      if (isFinePointer) { setShowControls(true); resetHideTimer(); }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('mousemove', handleGlobalMouseMove);\n    return () => {\n      if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n      if (clickTimerRef.current) clearTimeout(clickTimerRef.current);\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('mousemove', handleGlobalMouseMove);\n    };\n  }, [handleNext, handlePrev, resetHideTimer, isFinePointer]);\n\n  const {\n    handleTouchStart,\n    handleTouchMove,\n    handleTouchEnd,\n    handleDoubleTapZoom,\n    getClampedOffset\n  } = useTouchHandlers({\n    zoom, setZoom, offset, setOffset, viewportRef, currentIndex,\n    imagesLength: images.length, containerWidth, onClose,\n    handlePrev, handleNext, resetHideTimer, setIsDraggingState, state, resetZoom\n  });\n\n  const handleContainerClick = (e) => {\n    if (state.current.hasMoved) return;\n    const { clientX, clientY, target } = e;\n    if (clickTimerRef.current) {\n      clearTimeout(clickTimerRef.current);\n      clickTimerRef.current = null;\n      handleDoubleTapZoom(clientX, clientY, target);\n    } else {\n      clickTimerRef.current = setTimeout(() => {\n        setShowControls(prev => {\n          const next = !prev;\n          if (next) resetHideTimer();\n          else if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n          return next;\n        });\n        clickTimerRef.current = null;\n      }, 250);\n    }\n  };\n\n  const handleMouseDown = useCallback((e) => {\n    resetHideTimer();\n    state.current.isDragging = true;\n    setIsDraggingState(true);\n    state.current.initialClient = { x: e.clientX, y: e.clientY };\n    state.current.initialOffset = offset;\n    state.current.hasMoved = false;\n    state.current.dragType = null;\n  }, [offset, resetHideTimer]);\n\n  const handleMouseMove = useCallback((e) => {\n    if (!state.current.isDragging || e.touches) return;\n    const dx = e.clientX - state.current.initialClient.x;\n    const dy = e.clientY - state.current.initialClient.y;\n    if (Math.abs(dx) > 10 || Math.abs(dy) > 10) {\n      state.current.hasMoved = true;\n      setShowControls(true);\n      resetHideTimer();\n    }\n    if (zoom > 1) {\n      setOffset(getClampedOffset(state.current.initialOffset.x + dx, state.current.initialOffset.y + dy, zoom));\n    } else {\n      if (!state.current.dragType) {\n        if (Math.abs(dy) > Math.abs(dx) && dy > 0) state.current.dragType = 'dismiss';\n        else if (Math.abs(dx) > Math.abs(dy)) state.current.dragType = 'swipe';\n      }\n      if (state.current.dragType === 'dismiss') {\n        setOffset({ x: 0, y: Math.max(0, dy) });\n      } else if (state.current.dragType === 'swipe') {\n        let newX = state.current.initialOffset.x + dx;\n        if (currentIndex === 0 && newX > 0) newX = newX * 0.3;\n        if (currentIndex === images.length - 1 && newX < 0) newX = newX * 0.3;\n        setOffset({ x: newX, y: 0 });\n      }\n    }\n  }, [zoom, getClampedOffset, resetHideTimer, currentIndex, images.length]);\n\n  const handleMouseUp = useCallback(() => {\n    if (state.current.isDragging && zoom === 1) {\n      if (state.current.dragType === 'dismiss' && offset.y > 100) { onClose(); return; }\n      else if (state.current.dragType === 'swipe') {\n        const threshold = containerWidth * 0.2;\n        if (offset.x > threshold) handlePrev();\n        else if (offset.x < -threshold) handleNext();\n      }\n      setOffset({ x: 0, y: 0 });\n    }\n    state.current.isDragging = false;\n    setIsDraggingState(false);\n    state.current.dragType = null;\n  }, [zoom, offset.y, offset.x, handleNext, handlePrev, onClose, containerWidth]);\n\n  const handleWheel = useCallback((e) => {\n    e.preventDefault();\n    const delta = e.deltaY > 0 ? -0.2 : 0.2;\n    const newZoom = Math.min(Math.max(zoom + delta, 1), 5);\n    if (newZoom === zoom) return;\n    if (newZoom === 1) { resetZoom(); return; }\n    if (!viewportRef.current) return;\n    const rect = viewportRef.current.getBoundingClientRect();\n    const mouseX = e.clientX - (rect.left + rect.width / 2);\n    const mouseY = e.clientY - (rect.top + rect.height / 2);\n    const ratio = newZoom / zoom;\n    setZoom(newZoom);\n    setOffset(getClampedOffset(mouseX - (mouseX - offset.x) * ratio, mouseY - (mouseY - offset.y) * ratio, newZoom));\n  }, [zoom, offset, resetZoom, getClampedOffset]);\n\n  const overlayOpacity = state.current.dragType === 'dismiss' ? Math.max(1 - offset.y / 600, 0) : 1;\n\n  return (\n    <div \n      className={`image-modal-overlay ${isDraggingState ? 'is-dragging' : ''}`}\n      style={{ \n        backgroundColor: `rgba(0, 0, 0, ${1.0 * overlayOpacity})`,\n        transform: state.current.dragType === 'dismiss' ? `translate3d(0, ${offset.y}px, 0)` : 'none'\n      }}\n      onMouseDown={handleMouseDown} onMouseMove={handleMouseMove} onMouseUp={handleMouseUp} onMouseLeave={handleMouseUp} \n      onTouchStart={handleTouchStart} onTouchMove={handleTouchMove} onTouchEnd={handleTouchEnd}\n      onClick={handleContainerClick}\n    >\n      <div className=\"image-modal-content-container\">\n        <div className={`image-modal-header-bar ${!showControls ? 'hidden' : ''}`}>\n          <button className=\"modal-universal-back-btn\" onClick={(e) => { e.stopPropagation(); onClose(); }} aria-label=\"Back\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><line x1=\"19\" y1=\"12\" x2=\"5\" y2=\"12\"></line><polyline points=\"12 19 5 12 12 5\"></polyline></svg>\n          </button>\n          <div className=\"image-modal-info\">{currentIndex + 1} / {images.length}</div>\n        </div>\n        <button className={`modal-nav-btn prev ${currentIndex === 0 ? 'disabled' : ''} ${!showControls ? 'hidden' : ''}`} onClick={(e) => { e.stopPropagation(); handlePrev(); }} disabled={currentIndex === 0}>\n          <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><polyline points=\"15 18 9 12 15 6\"></polyline></svg>\n        </button>\n        <button className={`modal-nav-btn next ${currentIndex === images.length - 1 ? 'disabled' : ''} ${!showControls ? 'hidden' : ''}`} onClick={(e) => { e.stopPropagation(); handleNext(); }} disabled={currentIndex === images.length - 1}>\n          <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>\n        </button>\n        <div className=\"image-modal-wrapper fullscreen\">\n          <div className=\"image-modal-viewport fullscreen\" ref={viewportRef}>\n            <div className=\"slider-container\" style={{\n                transform: `translate3d(${-currentIndex * (containerWidth + 40) + (state.current.dragType === 'swipe' ? offset.x : 0)}px, 0, 0)`,\n                transition: (isDraggingState || isMounting || isResizing) ? 'none' : 'transform 0.4s cubic-bezier(0.16, 1, 0.3, 1)'\n              }}>\n              {images.map((img, idx) => (\n                <div key={idx} className=\"slide-item\">\n                  <div className=\"media-movable-content\" style={idx === currentIndex ? { \n                      transform: `translate(${zoom > 1 ? offset.x : 0}px, ${zoom > 1 ? offset.y : 0}px) scale(${zoom})`,\n                      transition: isDraggingState ? 'none' : 'transform 0.3s cubic-bezier(0.2, 0, 0, 1)' \n                    } : {}} onWheel={idx === currentIndex ? handleWheel : null}>\n                    <img src={img.link} alt={img.title || ''} className=\"image-modal-img-internal fullscreen\" draggable=\"false\" />\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n        <div className={`image-modal-footer-bar ${!showControls ? 'hidden' : ''}`}>\n          <div className=\"image-modal-caption\">\n            <div className=\"caption-title\">{images[currentIndex]?.title}</div>\n            <div className=\"caption-meta\">{images[currentIndex]?.meta}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ImageModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1251, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/components/VideoModal.js"],"sourcesContent":["import React, { useEffect, useState, useRef, useCallback } from 'react';\nimport { useMediaQuery } from '../hooks/useMediaQuery';\nimport './VideoModal.css';\n\nconst VideoModal = ({ src, alt, onClose }) => {\n  const isFinePointer = useMediaQuery('(pointer: fine)');\n  const [loading, setLoading] = useState(true);\n  const [offsetY, setOffsetY] = useState(0);\n  const [showControls, setShowControls] = useState(true);\n  const [isDraggingState, setIsDraggingState] = useState(false);\n  const isDragging = useRef(false);\n  const startY = useRef(0);\n  const startX = useRef(0);\n  const initialOffsetY = useRef(0);\n  const hideTimerRef = useRef(null);\n  const hasMoved = useRef(false);\n  const lastToggleTime = useRef(0);\n\n  const resetHideTimer = useCallback(() => {\n    if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n    hideTimerRef.current = setTimeout(() => setShowControls(false), 2500);\n  }, []);\n\n  const onCloseRef = useRef(onClose);\n  const isPopStateRef = useRef(false);\n\n  useEffect(() => {\n    onCloseRef.current = onClose;\n  }, [onClose]);\n\n  // Effect 1: History & Scroll Locking\n  useEffect(() => {\n    const scrollY = window.scrollY;\n    const initialPath = window.location.pathname;\n    const originalScrollRestoration = window.history.scrollRestoration;\n\n    if ('scrollRestoration' in window.history) {\n      window.history.scrollRestoration = 'manual';\n    }\n\n    document.body.style.position = 'fixed';\n    document.body.style.top = `-${scrollY}px`;\n    document.body.style.width = '100%';\n    document.body.style.overflowY = 'hidden';\n\n    const historyTimer = setTimeout(() => {\n      const currentUrl = window.location.pathname + window.location.search;\n      window.history.pushState({ modal: 'video' }, '', currentUrl);\n    }, 10);\n    \n    const handlePopState = () => {\n      isPopStateRef.current = true;\n      if (onCloseRef.current) onCloseRef.current();\n    };\n    \n    window.addEventListener('popstate', handlePopState);\n\n    return () => {\n      window.removeEventListener('popstate', handlePopState);\n      clearTimeout(historyTimer);\n      if (!isPopStateRef.current && window.history.state?.modal === 'video') window.history.back();\n\n      const scrollPos = document.body.style.top;\n      const currentPath = window.location.pathname;\n\n      document.body.style.position = '';\n      document.body.style.top = '';\n      document.body.style.width = '';\n      document.body.style.overflowY = '';\n      \n      if ('scrollRestoration' in window.history) {\n        window.history.scrollRestoration = originalScrollRestoration || 'auto';\n      }\n\n      if (scrollPos && currentPath === initialPath) {\n        const restoreY = Math.abs(parseInt(scrollPos, 10));\n        requestAnimationFrame(() => window.scrollTo(0, restoreY));\n      }\n    };\n  }, []);\n\n  // Effect 2: Event Listeners\n  useEffect(() => {\n    resetHideTimer();\n    const handleKeyDown = (e) => {\n      setShowControls(true);\n      resetHideTimer();\n      if (e.key === 'Escape') onCloseRef.current?.();\n    };\n    const handleMouseMove = () => {\n      if (isFinePointer) { setShowControls(true); resetHideTimer(); }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('mousemove', handleMouseMove);\n    return () => {\n      if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('mousemove', handleMouseMove);\n    };\n  }, [resetHideTimer, isFinePointer]);\n\n  const handleStart = (e) => {\n    isDragging.current = true;\n    setIsDraggingState(true);\n    hasMoved.current = false;\n    const clientY = e.type === 'touchstart' ? e.touches[0].clientY : e.clientY;\n    const clientX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;\n    startY.current = clientY;\n    startX.current = clientX;\n    initialOffsetY.current = offsetY;\n  };\n\n  const handleMove = (e) => {\n    if (!isDragging.current) return;\n    const clientY = e.type === 'touchmove' ? e.touches[0].clientY : e.clientY;\n    const clientX = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;\n    const dy = clientY - startY.current;\n    const dx = clientX - startX.current;\n    if (Math.abs(dy) > 20 || Math.abs(dx) > 20) {\n      hasMoved.current = true;\n      setShowControls(true);\n      resetHideTimer();\n    }\n    const newY = initialOffsetY.current + dy;\n    if (newY >= 0) setOffsetY(newY);\n  };\n\n  const handleContainerClick = useCallback((e) => {\n    if (hasMoved.current || offsetY > 10 || isFinePointer) return;\n    const now = Date.now();\n    if (now - lastToggleTime.current < 300) return;\n    lastToggleTime.current = now;\n    setShowControls(prev => {\n      const next = !prev;\n      if (next) resetHideTimer();\n      else if (hideTimerRef.current) clearTimeout(hideTimerRef.current);\n      return next;\n    });\n  }, [resetHideTimer, offsetY, isFinePointer]);\n\n  const handleEnd = useCallback((e) => {\n    if (!isDragging.current) return;\n    if (offsetY > 100) { onClose(); } \n    else {\n      setOffsetY(0);\n      if (!hasMoved.current) handleContainerClick(e);\n    }\n    isDragging.current = false;\n    setIsDraggingState(false);\n    startY.current = 0;\n    startX.current = 0;\n    setTimeout(() => { hasMoved.current = false; }, 150);\n  }, [offsetY, onClose, handleContainerClick]);\n\n  const getYouTubeVideoId = (url) => {\n    if (!url) return null;\n    const patterns = [\n      /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/|youtube\\.com\\/embed\\/)([^&\\n?#]+)/,\n      /youtube\\.com\\/watch\\?.*v=([^&\\n?#]+)/\n    ];\n    for (const pattern of patterns) {\n      const match = url.match(pattern);\n      if (match && match[1]) return match[1];\n    }\n    return null;\n  };\n\n  const overlayOpacity = Math.max(1 - offsetY / 600, 0);\n  if (!src) return null;\n  const isYouTube = src.includes('youtube.com') || src.includes('youtu.be');\n\n  return (\n    <div \n      className={`video-modal-overlay ${isDraggingState ? 'is-dragging' : ''}`}\n      onMouseDown={handleStart} onTouchStart={handleStart} onMouseMove={handleMove} onTouchMove={handleMove}\n      onMouseUp={handleEnd} onTouchEnd={handleEnd} onMouseLeave={handleEnd} onClick={handleContainerClick}\n      style={{ backgroundColor: `rgba(0, 0, 0, ${1.0 * overlayOpacity})`, transform: `translate3d(0, ${offsetY}px, 0)` }}\n    >\n      <div className=\"video-modal-content-container\">\n        <button className={`video-modal-close-btn ${!showControls ? 'hidden' : ''}`} onClick={(e) => { e.stopPropagation(); onClose(); }} aria-label=\"Close\" >&times;</button>\n        <div className=\"video-modal-wrapper\">\n          {loading && <div className=\"video-modal-loader\" />}\n          {isYouTube ? (\n            <iframe\n              src={`https://www.youtube.com/embed/${getYouTubeVideoId(src)}?autoplay=1`}\n              title={alt || 'YouTube video'}\n              className=\"video-modal-element\"\n              frameBorder=\"0\"\n              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n              allowFullScreen\n              onLoad={() => setLoading(false)}\n            />\n          ) : (\n            <video\n              src={src}\n              className=\"video-modal-element\"\n              controls\n              autoPlay\n              playsInline\n              onLoadedData={() => setLoading(false)}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VideoModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1518, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/assets/icons/menu-icon.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 24, height: 24, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,2JAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 1535, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/components/PageHeader.js"],"sourcesContent":["import React from 'react';\nimport './PageHeader.css';\nimport { useAppData } from '../context/AppDataContext';\nimport menuIcon from '../assets/icons/menu-icon.svg';\n\nconst PageHeader = ({ title }) => {\n  const { toggleMenu } = useAppData();\n\n  return (\n    <header className=\"page-header\">\n      <h1 className=\"page-header-title\">{title}</h1>\n      <div className=\"common-menu-icon\" onClick={toggleMenu}>\n        <img \n          src={menuIcon.src || menuIcon} \n          alt=\"Menu\" \n          className=\"menu-icon-img\" \n          width=\"24\" \n          height=\"24\"\n        />\n      </div>\n    </header>\n  );\n};\n\nexport default PageHeader;\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;;;;;;AAEA,MAAM,aAAa,CAAC,EAAE,KAAK,EAAE;IAC3B,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,8IAAU;IAEjC,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAG,WAAU;0BAAqB;;;;;;0BACnC,8OAAC;gBAAI,WAAU;gBAAmB,SAAS;0BACzC,cAAA,8OAAC;oBACC,KAAK,yVAAQ,CAAC,GAAG,IAAI,yVAAQ;oBAC7B,KAAI;oBACJ,WAAU;oBACV,OAAM;oBACN,QAAO;;;;;;;;;;;;;;;;;AAKjB;uCAEe"}},
    {"offset": {"line": 1592, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/app/exhibition/%5Bid%5D/page.js"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'next/navigation';\nimport './page.css';\nimport { useAppData } from '../../../context/AppDataContext';\nimport MediaDisplay from '../../../components/MediaDisplay';\nimport { SkeletonImage, SkeletonText, SkeletonBox } from '../../../components/Skeleton';\nimport ImageModal from '../../../components/ImageModal';\nimport VideoModal from '../../../components/VideoModal';\nimport PageHeader from '../../../components/PageHeader';\n\nconst ExhibitionDetail = () => {\n  const { id } = useParams();\n  const { exhibitions, fetchAllData } = useAppData();\n  const [selectedMedia, setSelectedMedia] = useState(null);\n\n  const [isMounted, setIsMounted] = useState(false);\n  const [windowWidth, setWindowWidth] = useState(0);\n\n  useEffect(() => {\n    setIsMounted(true);\n    setWindowWidth(window.innerWidth);\n    const handleResize = () => setWindowWidth(window.innerWidth);\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const getNumColumns = () => {\n    if (windowWidth < 768) return 1;\n    if (windowWidth < 1080) return 2;\n    return 3;\n  };\n\n  const numColumns = isMounted ? getNumColumns() : 3;\n\n\n  useEffect(() => {\n    // exhibitions 데이터가 없으면 fetchAllData 호출\n    if (!exhibitions) {\n      fetchAllData();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [exhibitions, fetchAllData]);\n\n  // exhibitions 데이터가 아직 로드되지 않았을 경우 스켈레톤 UI를 표시\n  if (!exhibitions) {\n    return (\n      <div className=\"exhibition-detail-page\">\n        <PageHeader title=\"EXHIBITION\" />\n        \n        <div className=\"exhibition-detail-header\">\n          <div className=\"exhibition-detail-subtitle\" style={{ marginTop: '5px', marginBottom: '20px' }}>\n            <SkeletonBox width=\"40%\" height=\"24px\" />\n          </div>\n        </div>\n\n        <div className=\"exhibition-detail-info\" style={{ gap: '4px' }}>\n          <SkeletonBox width=\"120px\" height=\"19px\" className=\"skeleton-badge\" />\n          <SkeletonBox width=\"150px\" height=\"19px\" className=\"skeleton-badge\" />\n        </div>\n        <div style={{ marginTop: '20px', marginBottom: '38px' }}>\n            <SkeletonText lines={4} />\n        </div>\n\n        <div className=\"exhibition-detail-images\">\n          {Array.from({ length: numColumns }).map((_, colIdx) => (\n            <div key={colIdx} className=\"exhibition-detail-column\">\n              {[...Array(3)].map((_, index) => (\n                <div key={index} className=\"exhibition-detail-image-container\">\n                  <SkeletonImage width=\"100%\" height=\"auto\" className=\"skeleton-work-image\" />\n                  <div className=\"exhibition-detail-work-info\" style={{ marginTop: '12px' }}>\n                    <SkeletonText lines={2} width=\"70%\" />\n                  </div>\n                </div>\n              ))}\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  // exhibitions 데이터가 로드된 후, id에 해당하는 exhibition을 찾음\n  // URL 인코딩된 ID를 디코딩하여 매칭\n  const decodedId = decodeURIComponent(id || \"\");\n  const exhibition = exhibitions.find(e => String(e.id) === decodedId);\n\n  // id에 해당하는 exhibition이 없을 경우 \"정보를 찾을 수 없음\" 메시지를 표시\n  if (!exhibition) {\n    return (\n      <div className=\"exhibition-detail-page\">\n        <PageHeader title=\"EXHIBITION\" />\n        <div style={{ padding: '20px', textAlign: 'center' }}>\n          전시 정보를 찾을 수 없습니다. (ID: {decodedId})\n        </div>\n      </div>\n    );\n  }\n\n  const allMedia = Array.isArray(exhibition.images) ? exhibition.images : [];\n  \n  // 데이터를 열 개수에 맞춰 분배\n  const columns = Array.from({ length: numColumns }, () => []);\n  allMedia.forEach((item, index) => {\n    columns[index % numColumns].push(item);\n  });\n\n  // 이미지들만 필터링 (네비게이션용)\n  const imageItems = allMedia.filter(item => {\n    const link = item.link?.toLowerCase() || \"\";\n    return !link.endsWith('.mp4') && !link.includes('youtube.com') && !link.includes('youtu.be');\n  });\n\n  const handleMediaClick = (item) => {\n    const link = item.link?.toLowerCase() || \"\";\n    const isVideo = link.endsWith('.mp4') || link.includes('youtube.com') || link.includes('youtu.be');\n    \n    if (isVideo) {\n      setSelectedMedia({ type: 'video', src: item.link, alt: item.title });\n    } else {\n      const index = imageItems.findIndex(img => img.link === item.link);\n      setSelectedMedia({ type: 'image', items: imageItems, index: index });\n    }\n  };\n\n  return (\n    <div className=\"exhibition-detail-page\">\n      <PageHeader title=\"EXHIBITION\" />\n\n      <div className=\"exhibition-detail-header\">\n        <h2 className=\"exhibition-detail-subtitle\">{exhibition.exhibitionTitle}</h2>\n      </div>\n\n      <div className=\"exhibition-detail-info\">\n        <div className=\"exhibition-detail-date\">{exhibition.date}</div>\n        <div className=\"exhibition-detail-location\">{exhibition.location}</div>\n        <p className=\"exhibition-detail-description\">{exhibition.description}</p>\n      </div>\n\n      <div className=\"exhibition-detail-images\">\n        {columns.map((column, colIdx) => (\n          <div key={colIdx} className=\"exhibition-detail-column\">\n            {column.map((item) => (\n              <div key={item.id} className=\"exhibition-detail-image-container\">\n                <MediaDisplay \n                  src={item.link} \n                  alt={item.label} \n                  className=\"exhibition-detail-image\" \n                  onClick={() => handleMediaClick(item)}\n                />\n                <div className=\"exhibition-detail-work-info\">\n                  <div className=\"exhibition-detail-work-title\">{item.title}</div>\n                  <div className=\"exhibition-detail-work-meta\">{item.meta}</div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n\n      {selectedMedia?.type === 'image' && (\n        <ImageModal \n          images={selectedMedia.items}\n          initialIndex={selectedMedia.index}\n          onClose={() => setSelectedMedia(null)} \n        />\n      )}\n\n      {selectedMedia?.type === 'video' && (\n        <VideoModal \n          src={selectedMedia.src}\n          alt={selectedMedia.alt}\n          onClose={() => setSelectedMedia(null)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ExhibitionDetail;\n"],"names":[],"mappings":"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"}}]
}