{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Users/kangmin/Desktop/project/hongyeonju/src/pages/api/getAbout.js"],"sourcesContent":["import { Client } from \"@notionhq/client\";\n\nconst notion = new Client({ auth: process.env.NOTION_TOKEN });\n\n// Removed localCache and lastFetchTime, CACHE_TTL as they are not used in the new version\n\nexport default async function handler(req, res) {\n  try {\n    const databaseId = process.env.NOTION_ABOUT_DB_ID;\n\n    const response = await notion.databases.query({\n      database_id: databaseId,\n      page_size: 1,\n    });\n\n    const page = response.results[0];\n    if (!page) return res.status(404).json({ error: \"About data not found\" });\n\n    const props = page.properties;\n\n    // 모든 텍스트/제목/이메일 속성을 안전하게 추출하는 헬퍼\n    const getPlainText = (prop) => {\n      if (!prop) return \"\";\n      if (prop.email) return prop.email; // 이메일 타입 처리\n      if (prop.title) return prop.title[0]?.plain_text || \"\";\n      if (prop.rich_text) return prop.rich_text[0]?.plain_text || \"\";\n      if (prop.select) return prop.select.name || \"\";\n      return \"\";\n    };\n\n    const aboutTextRaw = getPlainText(props.aboutText);\n    const data = {\n      mail: getPlainText(props.mail),\n      instagram: getPlainText(props.instagram),\n      aboutText: aboutTextRaw ? aboutTextRaw.split(\"\\n\") : [],\n    };\n\n    // Removed localCache and lastFetchTime updates\n\n    res.setHeader(\n      \"Cache-Control\",\n      \"public, s-maxage=1, stale-while-revalidate=3600\"\n    );\n\n    res.status(200).json(data);\n  } catch (err) {\n    console.error(err);\n    res.status(500).json({ error: \"Failed to load about data\" });\n  }\n}"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,SAAS,IAAI,sMAAM,CAAC;IAAE,MAAM,QAAQ,GAAG,CAAC,YAAY;AAAC;AAI5C,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC5C,IAAI;QACF,MAAM,aAAa,QAAQ,GAAG,CAAC,kBAAkB;QAEjD,MAAM,WAAW,MAAM,OAAO,SAAS,CAAC,KAAK,CAAC;YAC5C,aAAa;YACb,WAAW;QACb;QAEA,MAAM,OAAO,SAAS,OAAO,CAAC,EAAE;QAChC,IAAI,CAAC,MAAM,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAuB;QAEvE,MAAM,QAAQ,KAAK,UAAU;QAE7B,iCAAiC;QACjC,MAAM,eAAe,CAAC;YACpB,IAAI,CAAC,MAAM,OAAO;YAClB,IAAI,KAAK,KAAK,EAAE,OAAO,KAAK,KAAK,EAAE,YAAY;YAC/C,IAAI,KAAK,KAAK,EAAE,OAAO,KAAK,KAAK,CAAC,EAAE,EAAE,cAAc;YACpD,IAAI,KAAK,SAAS,EAAE,OAAO,KAAK,SAAS,CAAC,EAAE,EAAE,cAAc;YAC5D,IAAI,KAAK,MAAM,EAAE,OAAO,KAAK,MAAM,CAAC,IAAI,IAAI;YAC5C,OAAO;QACT;QAEA,MAAM,eAAe,aAAa,MAAM,SAAS;QACjD,MAAM,OAAO;YACX,MAAM,aAAa,MAAM,IAAI;YAC7B,WAAW,aAAa,MAAM,SAAS;YACvC,WAAW,eAAe,aAAa,KAAK,CAAC,QAAQ,EAAE;QACzD;QAEA,+CAA+C;QAE/C,IAAI,SAAS,CACX,iBACA;QAGF,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;IACvB,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAA4B;IAC5D;AACF"}}]
}